<!DOCTYPE html>
<html lang="en">

<head>

  <!-- Minima -->
  <!-- Hexo theme created by @adisaktijrs -->

  <!-- Basic Page Needs
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <meta charset="utf-8">

  
  <title>vue + iview é¡¹ç›®å®è·µæ€»ç»“</title>
  
  <link rel="canonical" href="https://nihaojob.github.io/2021/07/04/vue-iview/">
  
  <meta name="description" content="ä¸€ç›´æƒ³æŠŠä¸€å¤§ç¯‡çš„æ€»ç»“å†™å®Œã€å†™å¥½ï¼Œæ„Ÿè§‰è‡ªå·±æ‹–å»¶å¤ªä¸¥é‡è¿˜æ€»æƒ³å†™å®Œç¾ï¼Œç„¶åå¥½å¤šç¬”è®°éƒ½æ­»åœ¨ç¼–è¾‘å™¨é‡Œäº†ï¼Œä»¥åè¿˜æŒ‰ç…§ä¸€ä¸ªå°èŠ‚ä¸€ä¸ªå°èŠ‚çš„æ›´æ–°å§ï¼Œå°æ­¥å¿«è·‘ğŸ˜‚ï¼Œå…ˆå‘å‡ºæ¥ï¼Œä»¥åå†è¿­ä»£å§ã€‚  æœ€è¿‘æˆ‘ä»¬å‚ä¸å¼€å‘äº†ä¸€ä¸ªï¼ˆå¹´å‰äº†ï¼‰BIé¡¹ç›®ï¼Œå‰ç«¯ä½¿ç”¨vueå…¨å®¶æ¡¶ï¼Œé¡¹ç›®åŠŸèƒ½åŸºæœ¬å¼€å‘å®Œæˆï¼Œå‰©ä¸‹çš„ä¿®ä¿®è¡¥è¡¥ï¼Œå¼€å‘è¿‡ç¨‹è¿˜ç®—é¡ºç•…ï¼ŒæœŸé—´é‡åˆ°">
  
  
  <meta name="author" content="nihaojob@163.com">
  
  <meta property="og:image" content="https://nihaojob.github.ioundefined">
  
  <meta property="og:site_name" content="ç§¦å°‘å«çš„åšå®¢" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="vue + iview é¡¹ç›®å®è·µæ€»ç»“" />
  
  <meta property="og:description" content="ä¸€ç›´æƒ³æŠŠä¸€å¤§ç¯‡çš„æ€»ç»“å†™å®Œã€å†™å¥½ï¼Œæ„Ÿè§‰è‡ªå·±æ‹–å»¶å¤ªä¸¥é‡è¿˜æ€»æƒ³å†™å®Œç¾ï¼Œç„¶åå¥½å¤šç¬”è®°éƒ½æ­»åœ¨ç¼–è¾‘å™¨é‡Œäº†ï¼Œä»¥åè¿˜æŒ‰ç…§ä¸€ä¸ªå°èŠ‚ä¸€ä¸ªå°èŠ‚çš„æ›´æ–°å§ï¼Œå°æ­¥å¿«è·‘ğŸ˜‚ï¼Œå…ˆå‘å‡ºæ¥ï¼Œä»¥åå†è¿­ä»£å§ã€‚  æœ€è¿‘æˆ‘ä»¬å‚ä¸å¼€å‘äº†ä¸€ä¸ªï¼ˆå¹´å‰äº†ï¼‰BIé¡¹ç›®ï¼Œå‰ç«¯ä½¿ç”¨vueå…¨å®¶æ¡¶ï¼Œé¡¹ç›®åŠŸèƒ½åŸºæœ¬å¼€å‘å®Œæˆï¼Œå‰©ä¸‹çš„ä¿®ä¿®è¡¥è¡¥ï¼Œå¼€å‘è¿‡ç¨‹è¿˜ç®—é¡ºç•…ï¼ŒæœŸé—´é‡åˆ°">
  
  <meta property="og:url" content="https://nihaojob.github.io/2021/07/04/vue-iview/" />

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="vue + iview é¡¹ç›®å®è·µæ€»ç»“">
  
  <meta name="twitter:description" content="ä¸€ç›´æƒ³æŠŠä¸€å¤§ç¯‡çš„æ€»ç»“å†™å®Œã€å†™å¥½ï¼Œæ„Ÿè§‰è‡ªå·±æ‹–å»¶å¤ªä¸¥é‡è¿˜æ€»æƒ³å†™å®Œç¾ï¼Œç„¶åå¥½å¤šç¬”è®°éƒ½æ­»åœ¨ç¼–è¾‘å™¨é‡Œäº†ï¼Œä»¥åè¿˜æŒ‰ç…§ä¸€ä¸ªå°èŠ‚ä¸€ä¸ªå°èŠ‚çš„æ›´æ–°å§ï¼Œå°æ­¥å¿«è·‘ğŸ˜‚ï¼Œå…ˆå‘å‡ºæ¥ï¼Œä»¥åå†è¿­ä»£å§ã€‚  æœ€è¿‘æˆ‘ä»¬å‚ä¸å¼€å‘äº†ä¸€ä¸ªï¼ˆå¹´å‰äº†ï¼‰BIé¡¹ç›®ï¼Œå‰ç«¯ä½¿ç”¨vueå…¨å®¶æ¡¶ï¼Œé¡¹ç›®åŠŸèƒ½åŸºæœ¬å¼€å‘å®Œæˆï¼Œå‰©ä¸‹çš„ä¿®ä¿®è¡¥è¡¥ï¼Œå¼€å‘è¿‡ç¨‹è¿˜ç®—é¡ºç•…ï¼ŒæœŸé—´é‡åˆ°">
  
  
  <meta name="twitter:image" content="https://nihaojob.github.ioundefined">
  
  <meta name="twitter:url" content="https://nihaojob.github.io/2021/07/04/vue-iview/" />

  <!-- Mobile Specific Metas
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Preload fonts
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <link rel="preload" href="../fonts/dm-serif-display-v4-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="../fonts/inter-v2-latin-regular.woff2" as="font" type="font/woff2" crossorigin>

  <!-- CSS
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  
<link rel="stylesheet" href="/css/normalize.css">

  
<link rel="stylesheet" href="/css/skeleton.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
<link rel="stylesheet" href="/css/prism-dark.css">

  
<link rel="stylesheet" href="/css/prism-line-numbers.css">

  <!-- User css -->
  
  
<link rel="stylesheet" href="/css/user.css">

  

  <!-- Favicon
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <link rel="icon" type="image/png" href="/images/favicon.png">

  <!-- Custom Theme Color Style
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <style>
  a:not(.icon) {
    text-decoration-color: #0FA0CE;
    background-image: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0) 50%,
      #0FA0CE 50%
    );
  }
  blockquote {
    border-left: 8px solid #0FA0CE;
  }
  .nanobar .bar {
    background: #0FA0CE;
  }
  .button.button-primary:hover,
  button.button-primary:hover,
  input[type="submit"].button-primary:hover,
  input[type="reset"].button-primary:hover,
  input[type="button"].button-primary:hover,
  .button.button-primary:focus,
  button.button-primary:focus,
  input[type="submit"].button-primary:focus,
  input[type="reset"].button-primary:focus,
  input[type="button"].button-primary:focus {
    background-color: #0FA0CE;
    border-color: #0FA0CE;
  }
  input[type="email"]:focus,
  input[type="number"]:focus,
  input[type="search"]:focus,
  input[type="text"]:focus,
  input[type="tel"]:focus,
  input[type="url"]:focus,
  input[type="password"]:focus,
  textarea:focus,
  select:focus {
    border: 1px solid #0FA0CE;
  }
</style>

  <!-- Google Analytics (With Privacy Settings On)
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  

<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="ç§¦å°‘å«çš„åšå®¢" type="application/atom+xml">
</head>

<body>
  <div class="container">
    <div class="row">
      <div>

        <div class="row">
  <div class="two columns" style="max-width: 50px">
    <h1 class="mt-2 mode">
      <div onclick=setDarkMode(true) id="darkBtn">ğŸŒ‘</div>
      <div onclick=setDarkMode(false) id="lightBtn" class=hidden>â˜€ï¸</div>
      <script >
        if (localStorage.getItem('preferredTheme') == 'dark') {
          setDarkMode(true)
        }
        function setDarkMode(isDark) {
          var darkBtn = document.getElementById('darkBtn')
          var lightBtn = document.getElementById('lightBtn')
          if (isDark) {
            lightBtn.style.display = "block"
            darkBtn.style.display = "none"
            localStorage.setItem('preferredTheme', 'dark');
          } else {
            lightBtn.style.display = "none"
            darkBtn.style.display = "block"
            localStorage.removeItem('preferredTheme');
          }
          document.body.classList.toggle("darkmode");
        }
      </script>
    </h1>
  </div>

  <div class="six columns ml-1">
    <h1 class="mt-2">
      ç§¦å°‘å«çš„åšå®¢
    </h1>
  </div>

  <div class="twelve columns">
    <div class="row">
      <div class="nine columns left">
        <a href="/">ä¸»é¡µ</a>
        
          
          <a href="/archives" class="ml">å½’æ¡£</a>
          
        
          
          <a href="/About" class="ml">å…³äº</a>
          
        
          
          <a href="/atom.xml" class="ml">RSS</a>
          
        
          
          <a target="_blank" rel="noopener" href="https://juejin.cn/user/3843548383549214" class="ml">æ˜é‡‘</a>
          
        
        
      </div>
    </div>
    <hr style="margin-bottom: 2.6rem">
  </div>
</div>

        <div class="trans">
            <h2>vue + iview é¡¹ç›®å®è·µæ€»ç»“</h2>

  <blockquote>
<p>ä¸€ç›´æƒ³æŠŠä¸€å¤§ç¯‡çš„æ€»ç»“å†™å®Œã€å†™å¥½ï¼Œæ„Ÿè§‰è‡ªå·±æ‹–å»¶å¤ªä¸¥é‡è¿˜æ€»æƒ³å†™å®Œç¾ï¼Œç„¶åå¥½å¤šç¬”è®°éƒ½æ­»åœ¨ç¼–è¾‘å™¨é‡Œäº†ï¼Œä»¥åè¿˜æŒ‰ç…§ä¸€ä¸ªå°èŠ‚ä¸€ä¸ªå°èŠ‚çš„æ›´æ–°å§ï¼Œå°æ­¥å¿«è·‘ğŸ˜‚ï¼Œå…ˆå‘å‡ºæ¥ï¼Œä»¥åå†è¿­ä»£å§ã€‚</p>
</blockquote>
<p>æœ€è¿‘æˆ‘ä»¬å‚ä¸å¼€å‘äº†ä¸€ä¸ªï¼ˆå¹´å‰äº†ï¼‰BIé¡¹ç›®ï¼Œå‰ç«¯ä½¿ç”¨vueå…¨å®¶æ¡¶ï¼Œé¡¹ç›®åŠŸèƒ½åŸºæœ¬å¼€å‘å®Œæˆï¼Œå‰©ä¸‹çš„ä¿®ä¿®è¡¥è¡¥ï¼Œå¼€å‘è¿‡ç¨‹è¿˜ç®—é¡ºç•…ï¼ŒæœŸé—´é‡åˆ°å¥½å¤šé—®é¢˜ï¼Œä¹Ÿè®°å½•äº†ä¸€ä¸‹ï¼Œå‘å‡ºæ¥ä¸€èµ·äº¤æµï¼Œä¸»è¦æ˜¯æ€è·¯ï¼Œæ€ä¹ˆåˆ©ç”¨vueç»™çš„APIå®ç°åŠŸèƒ½ï¼Œé¿å…å¤§å®¶åœ¨åŒæ ·çš„å‘é‡Œå¾…å¤ªé•¿æ—¶é—´ï¼Œå¦‚æœæœ‰æ›´å¥½å®ç°æ€è·¯å¯ä»¥ä¸€èµ·äº¤æµè®¨è®ºğŸ˜ğŸ¤—ã€‚</p>
<p>å‰åç«¯åˆ†ç¦»å½¢å¼å¼€å‘ï¼Œ<code>vue+vueRouter+vueX+iviewUI+elementUI</code>ï¼Œå¤§éƒ¨åˆ†åŠŸèƒ½æˆ‘ä»¬éƒ½ç”¨çš„iviewUIï¼Œæœ‰éƒ¨åˆ†ç»„ä»¶æˆ‘ä»¬ç”¨äº†elementUIï¼Œæ¯”å¦‚è¡¨æ ¼ã€æ—¥å†æ’ä»¶ï¼Œæˆ‘ä»¬æ²¡æ¥mockå·¥å…·ï¼Œæ¥å£ç”¨æ–‡æ¡£çš„å½¢å¼äº¤æµï¼Œå›¢é˜Ÿæ°›å›´æ¯”è¾ƒå’Œè°ï¼Œä¸‰ä¸ªPHPä¸‰ä¸ªå‰ç«¯ï¼Œæ•ˆç‡è¿˜å¯ä»¥ï¼Œä¸¤ä¸ªå‰ç«¯ä¼™ä¼´æ¯”è¾ƒå‰å®³ï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨vueï¼Œå°±æ‰¿æ‹…äº†90%çš„å¼€å‘å·¥ä½œä»»åŠ¡ï¼Œæˆ‘æ²¡åˆ°ä¸Šçº¿å°±è·‘å›å®¶ä¼‘é™ªäº§å‡äº†ï¼Œç‰¹åˆ«æ„Ÿè°¢åŒäº‹ä»¬çš„æ”¯æŒï¼Œæˆ‘æ‰èƒ½å›å®¶çœ‹å¨ƒã€‚</p>
<p>å‰ç«¯å…¶å®ä¸å¤ªå¤æ‚ï¼Œä½†æ˜¯åªè¦ç”¨vueå¼€å‘åŸºæœ¬ä¸Šéƒ½ä¼šé‡åˆ°çš„å‡ ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚èœå•ç»„ä»¶å¤šçº§åµŒå¥—ã€åˆ·æ–°åé€‰ä¸­å½“å‰é¡¹ã€</p>
<p>æ¶‰åŠå‡ ä¸ªç‚¹ï¼Œè¡¨æ ¼è¡¨å¤´è¡¨ä½“åˆå¹¶ã€æ–‡ä»¶ä¸Šä¼ ã€å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€æƒé™æ ‘ç­‰ç­‰ã€‚</p>
<h3 id="é¡¹ç›®ä»‹ç»"><a href="#é¡¹ç›®ä»‹ç»" class="headerlink" title="é¡¹ç›®ä»‹ç»"></a>é¡¹ç›®ä»‹ç»</h3><p>ç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½å°±æ˜¯é¢å‘å„ä¸ªéƒ¨é—¨æŸ¥çœ‹æŠ¥è¡¨æ•°æ®ï¼Œåç«¯åŒå­¦ä»¬å¾ˆå‰å®³ï¼Œèƒ½æ±‡æ€»åˆ°ä¸€ä¸ªé›†å›¢çš„æ‰€æœ‰æ•°æ®ï¼Œå„ç§ç‚«é…·å¤§æ•°æ®æŠ€æœ¯ï¼›</p>
<p><strong>èœå•åŠŸèƒ½ï¼š</strong></p>
<ul>
<li><strong>æ•°æ®çœ‹æ¿ï¼š</strong> ç­›é€‰ã€å±•ç¤ºæ—¥æœŸå’Œè¡¨æ ¼åˆ†é¡µ</li>
<li><strong>ä¸šåŠ¡æŠ¥è¡¨ï¼š</strong> æŠ¥è¡¨ç±»å‹ï¼Œæ—¥æœŸç­›é€‰ã€è¡¨æ ¼åˆ†é¡µ</li>
<li><strong>æ•°æ®æ£€ç´¢ï¼š</strong> ç­›é€‰é¡¹è”åŠ¨ã€è¡¨æ ¼åˆ†é¡µ</li>
<li><strong>æŸè€—åœ°å›¾ï¼š</strong> ç­›é€‰é¡¹ã€å…³ç³»å›¾æ’ä»¶</li>
<li><strong>å±•å¼€åˆ†æï¼š</strong> ç­›é€‰é¡¹ã€åˆ†ç±»ã€å¡ç‰‡ã€è¡¨æ ¼</li>
<li><strong>ç³»ç»Ÿä¿¡æ¯ï¼š</strong> ç‰ˆæœ¬å‘å¸ƒã€æ­¥éª¤æ¡ã€å¯Œæ–‡æœ¬ç¼–è¾‘</li>
<li><strong>æ•°æ®æºä¸Šä¼ ï¼š</strong> æ‰‹åŠ¨ä¸Šä¼ ã€è¡¨æ ¼å±•ç¤º</li>
<li><strong>æƒé™ç®¡ç†ï¼š</strong> ç”¨æˆ·ç®¡ç†ã€è§’è‰²ç®¡ç†ï¼ˆæƒé™èœå•é…ç½®ï¼‰</li>
</ul>
<p><strong>é¡¹ç›®é¢„è§ˆå›¾ï¼š</strong></p>
<p><img src="https://user-gold-cdn.xitu.io/2019/3/8/1695b9e86c0f2431?w=1008&h=503&f=gif&s=271766"></p>
<p><img src="https://user-gold-cdn.xitu.io/2019/3/8/1695ba7011ff8f6a?w=951&h=445&f=gif&s=243118"></p>
<p><img src="https://user-gold-cdn.xitu.io/2019/3/8/1695ba693b32253a?w=880&h=425&f=gif&s=61438"></p>
<p>å¯¹å‹¾ä¸ºå·²æ›´æ–°ã€‚</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> <ol>
<li>ä½¿ç”¨v-ifè§£å†³å¼‚æ­¥ä¼ å‚</li>
</ol>
</li>
<li><input checked="" disabled="" type="checkbox"> <ol start="2">
<li>ä½¿ç”¨$refsè°ƒç”¨å­ç»„ä»¶æ–¹æ³•</li>
</ol>
</li>
<li><input checked="" disabled="" type="checkbox"> <ol start="3">
<li>ç»„ä»¶é€’å½’å®ç°å¤šçº§èœå•</li>
</ol>
</li>
<li><input checked="" disabled="" type="checkbox"> <ol start="4">
<li>ä½¿ç”¨watchç›‘å¬è·¯ç”±å‚æ•°é‡æ–°è·å–æ•°æ®</li>
</ol>
</li>
<li><input checked="" disabled="" type="checkbox"> <ol start="5">
<li>é¡µé¢åˆ·æ–°åMenuæ ¹æ®åœ°å€é€‰ä¸­å½“å‰èœå•é¡¹</li>
</ol>
</li>
<li><input checked="" disabled="" type="checkbox"> <ol start="6">
<li>ä½¿ç”¨Axiosç»Ÿä¸€çŠ¶æ€ç åˆ¤æ–­ã€ç»Ÿä¸€å¢åŠ tokenå­—æ®µ</li>
</ol>
</li>
<li><input checked="" disabled="" type="checkbox"> <ol start="7">
<li>ç‚¹å‡»å·¦ä¾§èœå•é€‰ä¸­é¡¹ç‚¹å‡»åˆ·æ–°é¡µé¢</li>
</ol>
</li>
<li><input checked="" disabled="" type="checkbox"> <ol start="8">
<li>ä½¿ç”¨Axios.CancelTokenåˆ‡æ¢è·¯ç”±å–æ¶ˆè¯·æ±‚</li>
</ol>
</li>
<li><input checked="" disabled="" type="checkbox"> <ol start="9">
<li>ä½¿ç”¨elementçš„tableç»„ä»¶å®ç° è¡¨å¤´è¡¨ä½“åˆå¹¶</li>
</ol>
</li>
<li><input checked="" disabled="" type="checkbox"> <ol start="10">
<li>iviewçš„Menuç»„ä»¶+vuexå®ç°é¢åŒ…å±‘å¯¼èˆª</li>
</ol>
</li>
<li><input checked="" disabled="" type="checkbox"> <ol start="11">
<li>iviewä¸Šä¼ ç»„ä»¶æ‰‹åŠ¨ä¸Šä¼ ä¸å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ¥å…¥</li>
</ol>
</li>
<li><input checked="" disabled="" type="checkbox"> <ol start="12">
<li>ä½¿ç”¨cheerioè·å–è¡¨æ ¼æ•°æ®</li>
</ol>
</li>
<li><input checked="" disabled="" type="checkbox"> <ol start="13">
<li>keep-liveç»„ä»¶ç¼“å­˜</li>
</ol>
</li>
<li><input checked="" disabled="" type="checkbox"> <ol start="14">
<li>è®©æ•°æ®ä¿æŒå•å‘æµåŠ¨ï¼ˆä¸è¦åœ¨å­ç»„ä»¶ä¸­æ“ä½œçˆ¶ç»„ä»¶çš„æ•°æ®ï¼‰</li>
</ol>
</li>
</ul>
<h3 id="1-ä½¿ç”¨v-ifè§£å†³å¼‚æ­¥ä¼ å‚ç»„ä»¶é‡ç»˜"><a href="#1-ä½¿ç”¨v-ifè§£å†³å¼‚æ­¥ä¼ å‚ç»„ä»¶é‡ç»˜" class="headerlink" title="1. ä½¿ç”¨v-ifè§£å†³å¼‚æ­¥ä¼ å‚ç»„ä»¶é‡ç»˜"></a>1. ä½¿ç”¨v-ifè§£å†³å¼‚æ­¥ä¼ å‚ç»„ä»¶é‡ç»˜</h3><p>å¤§éƒ¨åˆ†çš„äº¤äº’çš„æµç¨‹éƒ½æ˜¯ â€œajaxè¯·æ±‚æ•°æ®=&gt;ä¼ å…¥ç»„ä»¶æ¸²æŸ“â€ï¼Œå¾ˆå¤šå±æ€§éœ€è¦å¼‚æ­¥ä¼ å…¥å­ç»„ä»¶ç„¶åè¿›è¡Œç›¸å…³çš„è®¡ç®—ï¼Œå¦‚æœç»‘å®šå¾ˆå¤šcomputedæˆ–è€…watchï¼Œæ€§èƒ½å¼€é”€ä¼šå¾ˆå¤§ï¼Œè€Œä¸”æœ‰äº›åœºæ™¯å¹¶ä¸éœ€è¦ä½¿ç”¨computedå’Œwatchï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æœ€åˆåˆ›å»ºçš„æ—¶å€™è·å–ä¸€æ¬¡å°±å¤Ÿäº†ã€‚</p>
<p>å¦‚ä¸‹gifä¾‹å­,ç‚¹å‡»ä¸Šæ–¹TABåé‡æ–°åˆ·æ–°æŠ˜çº¿ç»„ä»¶ï¼š</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/3/8/1695b5069d34e6ff?w=1086&h=549&f=gif&s=74828"></p>
<pre class="line-numbers language-HTML" data-language="HTML"><code class="language-HTML">&lt;!--æ¨¡æ¿--&gt;
&lt;mapBox v-if&#x3D;&quot;mapData&quot; :data&#x3D;&quot;mapData&quot;&gt;&lt;&#x2F;mapBox&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<pre class="line-numbers language-JS" data-language="JS"><code class="language-JS">&lt;!--ç‚¹å‡»æœç´¢åæ‰§è¡Œ--&gt;
let This &#x3D; this
&#x2F;&#x2F; setp1 é‡ç‚¹
this.mapData &#x3D; false

this.$http
.post(&#39;&#x2F;api&#x2F;show&#x2F;mapcondition&#39;,&#123;key:key,type:type&#125;)
.then(function(response)&#123;
&#x2F;&#x2F; setp2 é‡ç‚¹
    this.mapData &#x3D; response.data
&#125;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æœ‰æ—¶å€™ä¼šå‡ºç°DOMå…ƒç´ ä¸æ•°æ®ä¸åŒæ­¥ï¼Œå¯ä»¥ä½¿ç”¨ä½¿ç”¨å…¶ä»–æ–¹å¼è®©DOMå¼ºåˆ·</p>
<pre class="line-numbers language-none"><code class="language-none">- setTimeou
- $forceUpdate()
- $nextTick()
- $set()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="2-ä½¿ç”¨-refsè°ƒç”¨å­ç»„ä»¶æ–¹æ³•"><a href="#2-ä½¿ç”¨-refsè°ƒç”¨å­ç»„ä»¶æ–¹æ³•" class="headerlink" title="2. ä½¿ç”¨$refsè°ƒç”¨å­ç»„ä»¶æ–¹æ³•"></a>2. ä½¿ç”¨$refsè°ƒç”¨å­ç»„ä»¶æ–¹æ³•</h3><p>æœ‰æ—¶å€™ä¼šæ¶‰åŠåˆ°çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶æ–¹æ³•çš„æƒ…å†µï¼Œä¾‹å¦‚ï¼Œiviewçš„Treeç»„ä»¶æš´éœ²å‡ºæ¥çš„<code>getCheckedAndIndeterminateNodes</code>æ–¹æ³•ï¼Œè¯¦è§å®˜ç½‘æ–‡æ¡£<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/components-edge-cases.html#%E8%AE%BF%E9%97%AE%E5%AD%90%E7%BB%84%E4%BB%B6%E5%AE%9E%E4%BE%8B%E6%88%96%E5%AD%90%E5%85%83%E7%B4%A0">link</a>ã€‚</p>
<pre class="line-numbers language-HTML" data-language="HTML"><code class="language-HTML">&lt;!--æ¨¡æ¿--&gt;
&lt;Tree v-if&#x3D;&quot;menu&quot; :data&#x3D;&quot;menu&quot; show-checkbox multiple ref&#x3D;&quot;Tree&quot;&gt;&lt;&#x2F;Tree&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<pre class="line-numbers language-JS" data-language="JS"><code class="language-JS">let rules &#x3D; this.$refs.Tree.getCheckedAndIndeterminateNodes();<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id="3-ç»„ä»¶é€’å½’å®ç°å¤šçº§èœå•"><a href="#3-ç»„ä»¶é€’å½’å®ç°å¤šçº§èœå•" class="headerlink" title="3. ç»„ä»¶é€’å½’å®ç°å¤šçº§èœå•"></a>3. ç»„ä»¶é€’å½’å®ç°å¤šçº§èœå•</h3><p>é€’å½’ç»„ä»¶ç”¨çš„å¾ˆå¤šï¼Œæˆ‘ä»¬çš„å·¦ä¾§èœå•è¿˜æœ‰æ— é™æ‹†åˆ†çš„è¡¨æ ¼åˆå¹¶ï¼Œéƒ½ç”¨åˆ°äº†é€’å½’ç»„ä»¶ï¼Œè¯¦è§å®˜ç½‘é“¾æ¥<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/components-edge-cases.html#%E9%80%92%E5%BD%92%E7%BB%84%E4%BB%B6">link</a>ã€‚</p>
<p>æ•ˆæœå›¾ï¼š</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/3/8/1695b53d364ac870?w=207&h=534&f=gif&s=142519"></p>
<p>å¤§è‡´æ€è·¯å°±æ˜¯å…ˆåˆ›å»ºä¸€ä¸ªå­ç»„ä»¶ï¼Œç„¶åå†åˆ›å»ºä¸€ä¸ªçˆ¶ç»„ä»¶ï¼Œå¾ªç¯å¼•ç”¨ï¼Œæ‹¿å·¦ä¾§èœå•è¯´æ˜ï¼Œä»£ç å¦‚ä¸‹ï¼Œæ•°æ®ç»“æ„ä¹Ÿåœ¨çˆ¶ç»„ä»¶ä¸­ã€‚</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token comment">&lt;!--index.vue  çˆ¶ç»„ä»¶ æ•°æ®æ¥å£åœ¨defaultä¸­--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Menu</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>auto<span class="token punctuation">"</span></span>
        <span class="token attr-name">theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dark<span class="token punctuation">"</span></span>
        <span class="token attr-name">:active-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>activeName<span class="token punctuation">"</span></span>
        <span class="token attr-name">:open-names</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>openNames<span class="token punctuation">"</span></span>
        <span class="token attr-name">@on-select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleSelect<span class="token punctuation">"</span></span>
        <span class="token attr-name">:accordion</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
    <span class="token punctuation">></span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item,index) in items<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>side-menu-item</span>
            <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.children&amp;&amp;item.children.length!==0<span class="token punctuation">"</span></span>
            <span class="token attr-name">:parent-item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span>
            <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index+<span class="token punctuation">'</span><span class="token punctuation">'</span><span class="token punctuation">"</span></span>
            <span class="token attr-name">:index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span>
        <span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>side-menu-item</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>menu-item</span> <span class="token attr-name">v-else</span>
            <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index+<span class="token punctuation">'</span><span class="token punctuation">'</span><span class="token punctuation">"</span></span>
            <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.path<span class="token punctuation">"</span></span>
        <span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Icon</span> <span class="token attr-name">:type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.icon<span class="token punctuation">"</span></span> <span class="token attr-name">:size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>&#123;&#123; item.title &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>menu-item</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Menu</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> sideMenuItem <span class="token keyword">from</span> <span class="token string">'@/components/Menu/side-menu-item.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    name<span class="token operator">:</span> <span class="token string">'sideMenu'</span><span class="token punctuation">,</span>
    props<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        activeName<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            type<span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'auth'</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        openNames<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            type<span class="token operator">:</span> Array<span class="token punctuation">,</span>
            <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span>
                <span class="token string">'other'</span><span class="token punctuation">,</span>
                <span class="token string">'role'</span><span class="token punctuation">,</span>
                <span class="token string">'auth'</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        items<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            type<span class="token operator">:</span> Array<span class="token punctuation">,</span>
            <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span>
                <span class="token punctuation">&#123;</span>
                    name <span class="token operator">:</span> <span class="token string">'system'</span><span class="token punctuation">,</span>
                    title <span class="token operator">:</span> <span class="token string">'æ•°æ®çœ‹æ¿'</span><span class="token punctuation">,</span>
                    icon <span class="token operator">:</span> <span class="token string">'ios-analytics'</span><span class="token punctuation">,</span>
                    children<span class="token operator">:</span> <span class="token punctuation">[</span>
                        <span class="token punctuation">&#123;</span> name <span class="token operator">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span> title <span class="token operator">:</span> <span class="token string">'ç”¨æˆ·ç®¡ç†'</span><span class="token punctuation">,</span> icon <span class="token operator">:</span> <span class="token string">'outlet'</span><span class="token punctuation">,</span>
                          children <span class="token operator">:</span> <span class="token punctuation">[</span>
                                <span class="token punctuation">&#123;</span> name <span class="token operator">:</span> <span class="token string">'auth'</span><span class="token punctuation">,</span> title <span class="token operator">:</span> <span class="token string">'æƒé™ç®¡ç†1'</span><span class="token punctuation">,</span> icon <span class="token operator">:</span> <span class="token string">'outlet'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                                <span class="token punctuation">&#123;</span> name <span class="token operator">:</span> <span class="token string">'auth'</span><span class="token punctuation">,</span> title <span class="token operator">:</span> <span class="token string">'æƒé™ç®¡ç†'</span><span class="token punctuation">,</span> icon <span class="token operator">:</span> <span class="token string">'outlet'</span><span class="token punctuation">,</span>
                                  children<span class="token operator">:</span><span class="token punctuation">[</span>
                                    <span class="token punctuation">&#123;</span> name <span class="token operator">:</span> <span class="token string">'334'</span><span class="token punctuation">,</span> title <span class="token operator">:</span> <span class="token string">'å­èœå•'</span><span class="token punctuation">,</span> icon <span class="token operator">:</span> <span class="token string">'outlet'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                                    <span class="token punctuation">&#123;</span> name <span class="token operator">:</span> <span class="token string">'453'</span><span class="token punctuation">,</span> title <span class="token operator">:</span> <span class="token string">'å­èœå•'</span><span class="token punctuation">,</span> icon <span class="token operator">:</span> <span class="token string">'outlet'</span> <span class="token punctuation">&#125;</span>
                                  <span class="token punctuation">]</span>
                                <span class="token punctuation">&#125;</span>
                            <span class="token punctuation">]</span>
                         <span class="token punctuation">&#125;</span>
                    <span class="token punctuation">]</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#123;</span>
                    name <span class="token operator">:</span> <span class="token string">'other'</span><span class="token punctuation">,</span>
                    title<span class="token operator">:</span> <span class="token string">'å…¶ä»–ç®¡ç†'</span><span class="token punctuation">,</span>
                    icon <span class="token operator">:</span> <span class="token string">'outlet'</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    components<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        sideMenuItem
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token function">handleSelect</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
           <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'on-select'</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token comment">&lt;!--side-menu-item.vue  å­ç»„ä»¶--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Submenu</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index+<span class="token punctuation">'</span><span class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Icon</span> <span class="token attr-name">:type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parentItem.icon<span class="token punctuation">"</span></span> <span class="token attr-name">:size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>&#123;&#123; parentItem.title &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item,i) in parentItem.children<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>side-menu-item</span>
                <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.children&amp;&amp;item.children.length!==0<span class="token punctuation">"</span></span>
                <span class="token attr-name">:parent-item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span>
                <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.path<span class="token punctuation">"</span></span>
                <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index+<span class="token punctuation">'</span>-<span class="token punctuation">'</span>+i<span class="token punctuation">"</span></span>
                <span class="token attr-name">:index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index+<span class="token punctuation">'</span>-<span class="token punctuation">'</span>+i<span class="token punctuation">"</span></span>
            <span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>side-menu-item</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>menu-item</span> <span class="token attr-name">v-else</span>
                <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index+<span class="token punctuation">'</span>-<span class="token punctuation">'</span>+i<span class="token punctuation">"</span></span>  <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.path<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Icon</span> <span class="token attr-name">:type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.icon<span class="token punctuation">"</span></span> <span class="token attr-name">:size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>&#123;&#123; item.title &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>menu-item</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Submenu</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    name<span class="token operator">:</span> <span class="token string">'sideMenuItem'</span><span class="token punctuation">,</span>
    props<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        parentItem<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            type<span class="token operator">:</span> Object<span class="token punctuation">,</span>
              <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        index<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">created</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="4-ä½¿ç”¨watchç›‘å¬è·¯ç”±å‚æ•°é‡æ–°è·å–æ•°æ®"><a href="#4-ä½¿ç”¨watchç›‘å¬è·¯ç”±å‚æ•°é‡æ–°è·å–æ•°æ®" class="headerlink" title="4. ä½¿ç”¨watchç›‘å¬è·¯ç”±å‚æ•°é‡æ–°è·å–æ•°æ®"></a>4. ä½¿ç”¨watchç›‘å¬è·¯ç”±å‚æ•°é‡æ–°è·å–æ•°æ®</h3><p><strong>å¾ˆå¤šèœå•é¡¹éƒ½åªæ˜¯å…¥å‚ä¸ä¸€æ ·</strong>ï¼Œæ˜¯ä¸ä¼šé‡æ–°èµ°ä¸šåŠ¡é€»è¾‘çš„ï¼Œæˆ‘ä»¬å°±ç”¨watchç›‘å¬$routerï¼Œå¦‚æœæ”¹å˜å°±é‡æ–°è¯·æ±‚æ–°çš„æ•°æ®ã€‚</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    watch<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token string">'$route'</span><span class="token operator">:</span><span class="token string">'isChange'</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span><span class="token punctuation">&#123;</span>
        <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token comment">// Do something</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token function">isChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="5-åˆ·æ–°ï¼šæ ¹æ®åœ°å€é€‰ä¸­å½“å‰èœå•é¡¹"><a href="#5-åˆ·æ–°ï¼šæ ¹æ®åœ°å€é€‰ä¸­å½“å‰èœå•é¡¹" class="headerlink" title="5. åˆ·æ–°ï¼šæ ¹æ®åœ°å€é€‰ä¸­å½“å‰èœå•é¡¹"></a>5. åˆ·æ–°ï¼šæ ¹æ®åœ°å€é€‰ä¸­å½“å‰èœå•é¡¹</h3><p>é¡µé¢åˆ·æ–°åå·¦ä¾§èœå•çš„é»˜è®¤é€‰ä¸­é¡¹å°±å’Œé¡µé¢å¯¹åº”ä¸ä¸Šäº†ï¼Œæˆ‘ä»¬ç”¨$routerçš„beforeEnteræ–¹æ³•åšåˆ¤æ–­ï¼Œæ ¹æ®åœ°å€è·å¾—è·¯ç”±çš„keyï¼ˆæ¯ä¸€ä¸ªè·¯ç”±éƒ½æœ‰ä¸€ä¸ªkeyçš„å‚æ•°ï¼‰ï¼Œå‚¨å­˜åˆ°localStorageä¸­ï¼Œç„¶åèœå•ç»„ä»¶å†ä»localStorageä¸­å–å‡ºkeyï¼Œå†éå†åŒ¹é…åˆ°å½“å‰é€‰é¡¹ç›®ï¼Œæ¯”è¾ƒå†—ä½™çš„æ˜¯æˆ‘ä»¬è¦åœ¨beforeEnterä¸­è·å–ä¸€éèœå•æ•°æ®ï¼Œç„¶ååˆ°èœå•ç»„ä»¶åˆè·å–ä¸€æ¬¡æ•°æ®ï¼Œè¯·æ±‚ä¸¤æ¬¡æ¥å£ã€‚</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/3/8/1695b57c9899d00e?w=782&h=802&f=png&s=513174"></p>
<pre class="line-numbers language-none"><code class="language-none">step1 router.jsä¸­è®¾ç½®beforeEnteræ–¹æ³•ï¼Œè·å¾—åœ°å€æ ä¸­çš„key å­˜å‚¨åˆ°localStorage

step2 èœå•ç»„ä»¶å–å‡ºlocalStorageä¸­keyï¼Œé€’å½’åŒ¹é…<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="6-Axiosç»Ÿä¸€çŠ¶æ€ç åˆ¤æ–­ã€ç»Ÿä¸€å¢åŠ tokenå­—æ®µ"><a href="#6-Axiosç»Ÿä¸€çŠ¶æ€ç åˆ¤æ–­ã€ç»Ÿä¸€å¢åŠ tokenå­—æ®µ" class="headerlink" title="6. Axiosç»Ÿä¸€çŠ¶æ€ç åˆ¤æ–­ã€ç»Ÿä¸€å¢åŠ tokenå­—æ®µ"></a>6. Axiosç»Ÿä¸€çŠ¶æ€ç åˆ¤æ–­ã€ç»Ÿä¸€å¢åŠ tokenå­—æ®µ</h3><p>Axiosçš„interceptorsæ–¹æ³•æœ‰requestå’Œresponseä¸¤ä¸ªæ–¹æ³•å¯¹è¯·æ±‚çš„å…¥å‚å’Œè¿”å›ç»“æœåšç»Ÿä¸€çš„å¤„ç†ã€‚</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>request é™¤ç™»å½•è¯·æ±‚å¤–ï¼Œå…¶ä»–å‡å¢åŠ tokenå­—æ®µ <span class="token operator">--</span><span class="token operator">></span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">let</span> token <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>token<span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> router<span class="token punctuation">.</span>currentRoute<span class="token punctuation">.</span>path <span class="token operator">==</span> <span class="token string">'/login'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">// æœ¬åœ°æ— token,æœªç™»å½• è·³è½¬è‡³ç™»å½•é¡µé¢</span>
    router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>data<span class="token operator">==</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      config<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
        <span class="token string">"token"</span><span class="token operator">:</span>token
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>
      Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>data<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token string">"token"</span><span class="token operator">:</span>token<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">return</span> config
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  iView<span class="token punctuation">.</span>Message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'è¯·æ±‚å¤±è´¥'</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>response è¿”å›çŠ¶æ€ç»Ÿä¸€å¤„ç† <span class="token operator">--</span><span class="token operator">></span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> response<span class="token punctuation">.</span>data <span class="token operator">==</span> <span class="token string">"object"</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">998</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">// ç™»å½•è¶…æ—¶ è·³è½¬è‡³ç™»å½•é¡µé¢</span>
          iView<span class="token punctuation">.</span>Message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>
          router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span>
          <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// æˆåŠŸ</span>
        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">1060</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">//æ•°æ®å®šåˆ¶ä¸­</span>
         <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span><span class="token comment">// å¤±è´¥</span>
        iView<span class="token punctuation">.</span>Message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>
        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  iView<span class="token punctuation">.</span>Message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'è¯·æ±‚å¤±è´¥'</span><span class="token punctuation">)</span>
  <span class="token comment">// è¯·æ±‚é”™è¯¯æ—¶åšäº›äº‹</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="7-ç‚¹å‡»å·¦ä¾§èœå•é€‰ä¸­é¡¹ç‚¹å‡»åˆ·æ–°é¡µé¢"><a href="#7-ç‚¹å‡»å·¦ä¾§èœå•é€‰ä¸­é¡¹ç‚¹å‡»åˆ·æ–°é¡µé¢" class="headerlink" title="7. ç‚¹å‡»å·¦ä¾§èœå•é€‰ä¸­é¡¹ç‚¹å‡»åˆ·æ–°é¡µé¢"></a>7. ç‚¹å‡»å·¦ä¾§èœå•é€‰ä¸­é¡¹ç‚¹å‡»åˆ·æ–°é¡µé¢</h3><p>æµ‹è¯•åŒå­¦æå‡ºbugï¼Œå·¦ä¾§èœå•é€‰ä¸­åï¼Œå†æ¬¡ç‚¹å‡»é€‰ä¸­é¡¹æ²¡æœ‰åˆ·æ–°ï¼Œç”¨æˆ·ä½“éªŒä¸å¥½ï¼Œäº§å“åŒå­¦ä¸€è‡´é€šè¿‡ï¼Œæˆ‘ä»¬å°±ç”¨é‡è·¯å­æ¥è§£å†³äº†ã€‚<br>ç»™èœå•ç»„ä»¶è®¾ç½®on-selectäº‹ä»¶ï¼Œç‚¹å‡»åå­˜å‚¨å½“å‰é€‰ä¸­é¡¹çš„pathï¼Œæ¯æ¬¡æ‰§è¡Œå½“å‰ç‚¹å‡»çš„pathå’Œå­˜å‚¨çš„pathåšå¯¹æ¯”ï¼Œå¦‚æœä¸€è‡´ï¼Œè·³è½¬åˆ°ç©ºç™½é¡µï¼Œç©ºç™½é¡µå†è¿”å›åˆ°å½“å‰é¡µï¼Œå®ç°å‡åˆ·æ–°ï¼Œæ³¨ï¼šä¸çŸ¥é“æ˜¯router.pushæœ‰èŠ‚æµæ§åˆ¶è¿˜æ˜¯æ€ä¹ˆå›äº‹ï¼Œä¸åŠ setTimeoutä¸ç®¡ç”¨ã€‚</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>èœå•çš„handleSelectäº‹ä»¶<span class="token operator">--</span><span class="token operator">></span>
<span class="token function">handleSelect</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> This <span class="token operator">=</span> <span class="token keyword">this</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>selectIndex <span class="token operator">==</span> <span class="token string">'reset'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>name <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectIndex<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token comment">// ç‚¹å‡»å†æ¬¡åˆ·æ–°</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">function_name</span><span class="token punctuation">(</span><span class="token parameter">argument</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
          This<span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
              path<span class="token operator">:</span> <span class="token string">'/Main/about'</span><span class="token punctuation">,</span>
              query<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                t<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
              <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>selectIndex <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'on-select'</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>ç©ºç™½é¡µ<span class="token operator">--</span><span class="token operator">></span>
<span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> This <span class="token operator">=</span> <span class="token keyword">this</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">function_name</span><span class="token punctuation">(</span><span class="token parameter">argument</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      This<span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="8-ä½¿ç”¨Axios-CancelTokenåˆ‡æ¢è·¯ç”±å–æ¶ˆè¯·æ±‚"><a href="#8-ä½¿ç”¨Axios-CancelTokenåˆ‡æ¢è·¯ç”±å–æ¶ˆè¯·æ±‚" class="headerlink" title="8. ä½¿ç”¨Axios.CancelTokenåˆ‡æ¢è·¯ç”±å–æ¶ˆè¯·æ±‚"></a>8. ä½¿ç”¨Axios.CancelTokenåˆ‡æ¢è·¯ç”±å–æ¶ˆè¯·æ±‚</h3><p>æœ‰ä¸€éƒ¨åˆ†æƒ…å†µæ˜¯åˆ‡æ¢è·¯ç”±æ—¶ï¼Œåªæ”¹å˜å‚æ•°ï¼Œåœ¨â€œ4. ä½¿ç”¨watchç›‘å¬è·¯ç”±å‚æ•°é‡æ–°è·å–æ•°æ®â€ä¸­æåˆ°è¿‡ï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†åŠŸèƒ½çš„æ¥å£æ•°æ®è¿”å›çš„ç‰¹åˆ«æ…¢ï¼Œä¼šå‡ºç°åˆ‡æ¢èœå•åï¼Œæ•°æ®æ‰åŠ è½½å‡ºæ¥ï¼Œéœ€è¦å¢åŠ åˆ‡æ¢èœå•åå–æ¶ˆåŸæ¥çš„è¯·æ±‚ï¼Œä»£ç æ³¨é‡Šä¸­ setp1ã€2ã€3ä¸ºé¡ºåº</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">// setp1 åˆ›å»ºdataå…¬å…±çš„sourceå˜é‡ </span>
      source<span class="token operator">:</span><span class="token string">''</span>                
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">created</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token comment">// è·å–æœç´¢æ•°æ®</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  watch<span class="token operator">:</span><span class="token punctuation">&#123;</span>
    <span class="token string">'$route'</span><span class="token operator">:</span><span class="token string">'watchGetSearchData'</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span><span class="token punctuation">&#123;</span>
    <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      <span class="token comment">// setp2 è¯·æ±‚æ—¶åˆ›å»ºsourceå®ä¾‹ </span>
      <span class="token keyword">let</span> CancelToken <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span>CancelToken
      <span class="token keyword">this</span><span class="token punctuation">.</span>source <span class="token operator">=</span> CancelToken<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token function">watchGetSearchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      <span class="token comment">// setp3 åˆ‡æ¢è·¯ç”±æ—¶å–æ¶ˆsourceå®ä¾‹ </span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token string">'0000'</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$http
        <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/show/map'</span><span class="token punctuation">,</span>data<span class="token punctuation">,</span><span class="token punctuation">&#123;</span>cancelToken<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>source<span class="token punctuation">.</span>token<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="9-elementçš„tableç»„ä»¶å®ç°-è¡¨å¤´è¡¨ä½“åˆå¹¶"><a href="#9-elementçš„tableç»„ä»¶å®ç°-è¡¨å¤´è¡¨ä½“åˆå¹¶" class="headerlink" title="9. elementçš„tableç»„ä»¶å®ç° è¡¨å¤´è¡¨ä½“åˆå¹¶"></a>9. elementçš„tableç»„ä»¶å®ç° è¡¨å¤´è¡¨ä½“åˆå¹¶</h3><p>æˆ‘ä»¬é¡¹ç›®ç”¨åˆ°çš„çš„ç»„ä»¶è¡¨æ ¼æœ‰ä¸¤ç§ï¼Œä¸€ç§ç”¨iviewçš„tableï¼Œå¸¦æ“ä½œæŒ‰é’®çš„è¡¨æ ¼ï¼Œæ”¯æŒè¡¨å¤´è·¨è¡Œè·¨åˆ—ï¼Œå¦ä¸€ç§elementçš„tableç»„ä»¶ï¼Œçº¯æ•°æ®å±•ç¤ºï¼Œæ”¯æŒè¡¨å¤´å’Œæ ‡é¢˜çš„è·¨è¡Œè·¨åˆ—ã€‚</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/3/8/1695b61f1c01782a?w=992&h=346&f=png&s=72840"></p>
<p><img src="https://user-gold-cdn.xitu.io/2019/3/8/1695b6330fb064f0?w=913&h=484&f=gif&s=49381"></p>
<p><img src="https://user-gold-cdn.xitu.io/2019/3/8/1695b63510cefa99?w=913&h=484&f=gif&s=260205"></p>
<p>elementçš„tableç»„ä»¶æ”¯æŒè¡¨å¤´æ ‡é¢˜åˆå¹¶ï¼Œæˆ‘ä»¬å®šä¹‰æ•°æ®ç»“æ„åŒ…å«ä¸‰éƒ¨åˆ†ï¼Œè¡¨å¤´ã€è¡¨ä½“ã€è¡¨ä½“åˆå¹¶é¡¹ã€‚<br>è¡¨å¤´ç›´æ¥ä½¿ç”¨é€’å½’ç»„ä»¶åµŒå¥—å°±å¯ä»¥äº†ï¼Œè¡¨ä½“æ•°æ®ç›´æ¥æ‰”ç»™tableç»„ä»¶ï¼Œåˆå¹¶é€šè¿‡cellMergeæ–¹æ³•éå†åˆå¹¶é¡¹æ•°æ®éå†åˆå¹¶ï¼Œä»£ç å¦‚ä¸‹ã€‚</p>
<p><strong>æ•°æ®ç»“æ„</strong></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">data<span class="token operator">:</span><span class="token punctuation">&#123;</span>
    historyColumns<span class="token operator">:</span><span class="token punctuation">[</span>  <span class="token comment">// è¡¨å¤´æ•°æ®</span>
        <span class="token punctuation">&#123;</span>
            <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">" "</span><span class="token punctuation">,</span>
            <span class="token string">"key"</span><span class="token operator">:</span> <span class="token string">"column"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>
            <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"æŒ‡æ ‡"</span><span class="token punctuation">,</span>
            <span class="token string">"key"</span><span class="token operator">:</span> <span class="token string">"target"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>
            <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"11/22"</span><span class="token punctuation">,</span>
            <span class="token string">"key"</span><span class="token operator">:</span> <span class="token string">"11/22"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>
            <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"æ—¥ç¯æ¯”"</span><span class="token punctuation">,</span>
            <span class="token string">"key"</span><span class="token operator">:</span> <span class="token string">"æ—¥ç¯æ¯”"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>
            <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"å½“å‘¨å€¼"</span><span class="token punctuation">,</span>
            <span class="token string">"key"</span><span class="token operator">:</span> <span class="token string">"å½“å‘¨å€¼"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>
            <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"ä¸Šå‘¨åŒæœŸ"</span><span class="token punctuation">,</span>
            <span class="token string">"key"</span><span class="token operator">:</span> <span class="token string">"ä¸Šå‘¨åŒæœŸ"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>
            <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"å‘¨ç¯æ¯”"</span><span class="token punctuation">,</span>
            <span class="token string">"key"</span><span class="token operator">:</span> <span class="token string">"å‘¨ç¯æ¯”"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>
            <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"è¿‘7æ—¥ç´¯è®¡"</span><span class="token punctuation">,</span>
            <span class="token string">"key"</span><span class="token operator">:</span> <span class="token string">"è¿‘7æ—¥ç´¯è®¡"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>
            <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"å½“æœˆç´¯è®¡"</span><span class="token punctuation">,</span>
            <span class="token string">"key"</span><span class="token operator">:</span> <span class="token string">"å½“æœˆç´¯è®¡"</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    histories<span class="token operator">:</span><span class="token punctuation">[</span>  <span class="token comment">// è¡¨ä½“æ•°æ®</span>
        <span class="token punctuation">&#123;</span>
            <span class="token string">"target"</span><span class="token operator">:</span> <span class="token string">"åœ¨å”®é‡"</span><span class="token punctuation">,</span>
            <span class="token string">"11/22"</span><span class="token operator">:</span> <span class="token number">912</span><span class="token punctuation">,</span>
            <span class="token string">"æ—¥ç¯æ¯”"</span><span class="token operator">:</span> <span class="token string">"-"</span><span class="token punctuation">,</span>
            <span class="token string">"å½“å‘¨å€¼"</span><span class="token operator">:</span> <span class="token number">912</span><span class="token punctuation">,</span>
            <span class="token string">"ä¸Šå‘¨åŒæœŸ"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token string">"å‘¨ç¯æ¯”"</span><span class="token operator">:</span> <span class="token string">"100%"</span><span class="token punctuation">,</span>
            <span class="token string">"è¿‘7æ—¥ç´¯è®¡"</span><span class="token operator">:</span> <span class="token number">912</span><span class="token punctuation">,</span>
            <span class="token string">"å½“æœˆç´¯è®¡"</span><span class="token operator">:</span> <span class="token number">912</span><span class="token punctuation">,</span>
            <span class="token string">"column"</span><span class="token operator">:</span> <span class="token string">"åŸºç¡€æŒ‡æ ‡"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>
            <span class="token string">"target"</span><span class="token operator">:</span> <span class="token string">"-åœ¨å”®å¤–åº“è½¦é‡"</span><span class="token punctuation">,</span>
            <span class="token string">"11/22"</span><span class="token operator">:</span> <span class="token number">29</span><span class="token punctuation">,</span>
            <span class="token string">"æ—¥ç¯æ¯”"</span><span class="token operator">:</span> <span class="token string">"-"</span><span class="token punctuation">,</span>
            <span class="token string">"å½“å‘¨å€¼"</span><span class="token operator">:</span> <span class="token number">29</span><span class="token punctuation">,</span>
            <span class="token string">"ä¸Šå‘¨åŒæœŸ"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token string">"å‘¨ç¯æ¯”"</span><span class="token operator">:</span> <span class="token string">"100%"</span><span class="token punctuation">,</span>
            <span class="token string">"è¿‘7æ—¥ç´¯è®¡"</span><span class="token operator">:</span> <span class="token number">29</span><span class="token punctuation">,</span>
            <span class="token string">"å½“æœˆç´¯è®¡"</span><span class="token operator">:</span> <span class="token number">29</span><span class="token punctuation">,</span>
            <span class="token string">"column"</span><span class="token operator">:</span> <span class="token string">"åŸºç¡€æŒ‡æ ‡"</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    merge<span class="token operator">:</span><span class="token punctuation">[</span>  <span class="token comment">// è¡¨ä½“åˆå¹¶é¡¹</span>
        <span class="token punctuation">&#123;</span>
            <span class="token string">"rowNum"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token string">"colNum"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token string">"ropSpan"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token string">"copSpan"</span><span class="token operator">:</span> <span class="token number">4</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>
            <span class="token string">"rowNum"</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
            <span class="token string">"colNum"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token string">"ropSpan"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token string">"copSpan"</span><span class="token operator">:</span> <span class="token number">27</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>è¡¨ä½“åˆå¹¶è¯´æ˜ï¼š</strong> è¡¨æ ¼æœ‰cellMergeæ–¹æ³•ï¼Œæ¯ä¸€tdåœ¨æ¸²æŸ“æ—¶éƒ½ä¼šæ‰§è¡Œè¿™ä¸ªæ–¹æ³•ï¼Œåœ¨cellMergeé‡Œéå†mergeæ•°æ®ï¼Œæ ¹æ®cellMergeçš„å…¥å‚è¡Œã€åˆ—å®šä½åˆ°tdï¼Œå¦‚æœæ˜¯è¦åˆå¹¶çš„è¡¨æ ¼ï¼Œåˆ™returnå‡ºè¦åˆå¹¶çš„è¡Œæ•°å’Œåˆ—æ•°ï¼Œå¦‚æœåœ¨åˆå¹¶çš„èŒƒå›´å†…ï¼Œåˆ™è¦return [0,0]ï¼Œéšè—å½“å‰tdã€‚</p>
<p>æ¯”å¦‚è¦æŠŠAã€Bã€Cã€Dï¼Œmergeçš„æ•°æ®rowNumä¸ºAçš„è¡Œã€colNumä¸ºAçš„åˆ—ã€ropSpanä¸º2ã€copSpanä¸º2ï¼Œåœ¨cellMergeæ–¹æ³•ä¸­ï¼Œå¦‚æœåæ ‡ä¸ºAçš„å•å…ƒæ ¼ï¼Œreturn ropSpanå’ŒcopSpanï¼Œ<strong>å¦‚æœåæ ‡ä¸ºBã€Cã€Dåˆ™è¦return [0,0]éšè—ï¼Œå¦åˆ™ä¼šå‡ºç°è¡¨æ ¼é”™ä¹±</strong>ã€‚</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/3/8/1695b6429ddbdb1b?w=1176&h=746&f=png&s=91959"><br><strong>mergeæ–¹æ³•ä»£ç ï¼š</strong></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// è¡¨æ ¼åˆå¹¶ä¸»æ–¹æ³•  row:è¡Œæ•°ç»„  column:åˆ—æ•°æ®  rowIndexã€columnIndexè¡Œåˆ—ç´¢å¼•</span>
<span class="token function">cellMerge</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> row<span class="token punctuation">,</span> column<span class="token punctuation">,</span> rowIndex<span class="token punctuation">,</span> columnIndex <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>

  <span class="token keyword">let</span> This <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>This<span class="token punctuation">.</span>configJson<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> This<span class="token punctuation">.</span>configJson<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>

      <span class="token keyword">let</span> rowNum <span class="token operator">=</span> This<span class="token punctuation">.</span>configJson<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>rowNum   <span class="token comment">// è¡Œ</span>
      <span class="token keyword">let</span> colNum <span class="token operator">=</span> This<span class="token punctuation">.</span>configJson<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>colNum   <span class="token comment">// åˆ—</span>

      <span class="token keyword">let</span> ropSpan <span class="token operator">=</span> This<span class="token punctuation">.</span>configJson<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>ropSpan <span class="token comment">// è·¨åˆ—æ•°</span>
      <span class="token keyword">let</span> copSpan <span class="token operator">=</span> This<span class="token punctuation">.</span>configJson<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>copSpan <span class="token comment">// è·¨è¡Œæ•°</span>

      <span class="token keyword">if</span><span class="token punctuation">(</span>rowIndex <span class="token operator">==</span> rowNum <span class="token operator">&amp;&amp;</span> columnIndex <span class="token operator">==</span> colNum <span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">// å½“å‰è¡¨æ ¼index åˆå¹¶é¡¹</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span>copSpan<span class="token punctuation">,</span>ropSpan<span class="token punctuation">]</span>
      <span class="token comment">// éšè—èŒƒå›´å†…å®¹çš„å•å…ƒæ ¼</span>
      <span class="token comment">// è¡ŒèŒƒå›´ rowNum &lt;= rowIndex &amp;&amp; rowIndex &lt; (rowNum+copSpan)</span>
      <span class="token comment">// åˆ—èŒƒå›´ colNum &lt;= columnIndex &amp;&amp; columnIndex &lt; (colNum+ropSpan)</span>
      <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span> rowNum <span class="token operator">&lt;=</span> rowIndex <span class="token operator">&amp;&amp;</span> rowIndex <span class="token operator">&lt;</span> <span class="token punctuation">(</span>rowNum<span class="token operator">+</span>copSpan<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> colNum <span class="token operator">&lt;=</span> columnIndex <span class="token operator">&amp;&amp;</span> columnIndex <span class="token operator">&lt;</span> <span class="token punctuation">(</span>colNum<span class="token operator">+</span>ropSpan<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">&#123;</span>

        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>
      <span class="token punctuation">&#125;</span>

    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>è¡¨å¤´åˆå¹¶è¯´æ˜ï¼š</strong>elementå’Œiviewçš„è¡¨å¤´åˆå¹¶æ•°æ®æ ¼å¼å¯ä»¥ä¸€æ ·ï¼Œéƒ½æ˜¯é€’å½’å½¢å¼ï¼ŒåŒºåˆ«æ˜¯iviewçš„tableç»„ä»¶ç›´æ¥æŠŠæ•°æ®æ‰”ç»™ç»„ä»¶å°±å¯ä»¥äº†ï¼Œè€Œelementéœ€è¦è‡ªå·±å°è£…ä¸€ä¸‹è¡¨å¤´ã€‚</p>
<pre class="line-numbers language-JS" data-language="JS"><code class="language-JS">&#x2F;&#x2F; å­ç»„ä»¶
&lt;template&gt;
  &lt;el-table-column :prop&#x3D;&quot;thList.key&quot; :label&#x3D;&quot;thList.title&quot; align&#x3D;&quot;center&quot;&gt;

    &lt;template v-for&#x3D;&quot;(item,i) in thList.children&quot; &gt;

        &lt;tableItem  v-if&#x3D;&quot;item.children&amp;&amp;item.children.length!&#x3D;&#x3D;0&quot;
        :thList&#x3D;&quot;item&quot; &#x2F;&gt;&lt;&#x2F;tableItem&gt;

        &lt;el-table-column align&#x3D;&quot;center&quot; v-else
              :prop&#x3D;&quot;item.key&quot;
              :label&#x3D;&quot;item.title&quot;
              :formatter&#x3D;&quot;toThousands&quot;
            &gt;
            
        &lt;&#x2F;el-table-column&gt;
      &lt;&#x2F;template&gt;
  &lt;&#x2F;el-table-column&gt;
&lt;&#x2F;template&gt;
&lt;script&gt;
export default &#123;
    name: &#39;tableItem&#39;,
    props: &#123;
        thList: &#123;
            type: Object,
              default: () &#x3D;&gt; &#123;&#125;
        &#125;,
    &#125;,
&#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>å°è£…åçš„tableç»„ä»¶ï¼š</strong></p>
<pre class="line-numbers language-JS" data-language="JS"><code class="language-JS">&lt;template&gt;
  &lt;div&gt;
    &lt;el-table :data&#x3D;&quot;Tbody&quot; :stripe&#x3D;&quot;stripe&quot; :border&#x3D;&quot;true&quot; :span-method&#x3D;&quot;cellMerge&quot; align&#x3D;&quot;center&quot; :header-cell-style&#x3D;&quot;tableHeaderColor&quot;  height&#x3D;&quot;600&quot; &gt;
      &lt;template v-for&#x3D;&quot;(item,i) in Thead&quot;&gt;
          &lt;template v-if&#x3D;&quot;item.children&amp;&amp;item.children.length!&#x3D;&#x3D;0&quot; &gt;

            &lt;tableItem :thList&#x3D;&quot;item&quot; &#x2F;&gt;

          &lt;&#x2F;template&gt;

          &lt;template v-else &gt;

            &lt;el-table-column align&#x3D;&quot;center&quot;
              :prop&#x3D;&quot;item.key&quot;
              :label&#x3D;&quot;item.title&quot;
              :formatter&#x3D;&quot;toThousands&quot;
            &gt;
            &lt;&#x2F;el-table-column&gt;

          &lt;&#x2F;template&gt;
        &lt;&#x2F;template&gt;
      &lt;&#x2F;el-table&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;script&gt;
import tableItem from &#39;@&#x2F;components&#x2F;table&#x2F;tableHeader&#x2F;table-Item.vue&#39;
export default &#123;
    name: &#39;table-header&#39;,
    props: &#123;
        Thead: &#123;
            type: Array,
            default: () &#x3D;&gt; &#123;&#125;
        &#125;,
        Tbody:&#123;
          type: Array,
          default: () &#x3D;&gt; &#123;&#125;
        &#125;,
        stripe:&#123;
          type:Boolean,
          default:false
        &#125;,
        cellMerge:Function,
          default:()&#x3D;&gt;&#123;&#125;
    &#125;,
    created:function()&#123;
    &#125;,
    components:&#123;
      tableItem
    &#125;,
    methods:&#123;
      tableHeaderColor(&#123; row, column, rowIndex, columnIndex &#125;) &#123;
        if (rowIndex &#x3D;&#x3D;&#x3D; 0) &#123;
          return &#39;background-color: #f8f8f9;&#39;
        &#125;
      &#125;
    &#125;
&#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>å…¶ä»–é¡µé¢å¤ç”¨table</strong></p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token comment">&lt;!--å¼•å…¥--></span>
import TableList from '@/components/table/tableHeader/index.vue'
<span class="token comment">&lt;!--è°ƒç”¨--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TableList</span> <span class="token attr-name">:Thead</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>historyColumns<span class="token punctuation">"</span></span> <span class="token attr-name">:Tbody</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>historyData<span class="token punctuation">"</span></span> <span class="token attr-name">:cellMerge</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cellMerge<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="10-iviewçš„Menuç»„ä»¶-vuexå®ç°é¢åŒ…å±‘å¯¼èˆª"><a href="#10-iviewçš„Menuç»„ä»¶-vuexå®ç°é¢åŒ…å±‘å¯¼èˆª" class="headerlink" title="10. iviewçš„Menuç»„ä»¶+vuexå®ç°é¢åŒ…å±‘å¯¼èˆª"></a>10. iviewçš„Menuç»„ä»¶+vuexå®ç°é¢åŒ…å±‘å¯¼èˆª</h3><p>iviewçš„Menuç»„ä»¶æœ‰on-selectæ–¹æ³•ï¼Œå¯ä»¥è·å¾—å½“é€‰é€‰ä¸­é¡¹çš„nameï¼Œæˆ‘ä»¬çš„nameæŒ‰ç…§æ•°æ®ç´¢å¼•æ¥éå†çš„ï¼Œæ¯”å¦‚ä¸‰çº§èœå•ï¼Œé€‰ä¸­åä¼šè¿”å›<code>2-0-1</code>è¿™æ ·çš„å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæ ‘èœå•ç¬¬3ä¸ªèœå•ä¸‹çš„ç¬¬1ä¸ªå­èœå•ä¸‹çš„ç¬¬2ä¸ªèœå•é¡¹ï¼Œé€šè¿‡è¿™ä¸ªå­—ç¬¦ä¸²å†ç­›é€‰å‡ºæ•°ç»„<code>[&#39;ä¸šåŠ¡æŠ¥è¡¨&#39;,&#39;B2CæŠ¥è¡¨&#39;,&#39;æˆäº¤æ˜ç»†&#39;]</code>å¯¹åº”èœå•çš„titleï¼Œç„¶åå‘ç»™vuexçš„Store.stateï¼Œç„¶åé¢åŒ…å±‘ç»„ä»¶é€šè¿‡è®¡ç®—æ•°æ®å±æ€§ç›‘å¬Store.stateæ‹¿å±æ€§å±•ç¤ºå°±å¯ä»¥äº†ã€‚</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> æ ¹æ®å­—ç¬¦ä¸²ç­›å‡ºtitleæ•°ç»„ å‘ç»™$store <span class="token operator">--</span><span class="token operator">></span>
<span class="token function">toBreadcrumb</span><span class="token punctuation">(</span><span class="token parameter">arrIndex</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>

      <span class="token keyword">let</span> This <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> mapIndex <span class="token operator">=</span> arrIndex<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// è·å–å¯¹åº”name</span>
      <span class="token keyword">let</span> box<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

      <span class="token keyword">let</span> mapText <span class="token operator">=</span> mapIndex<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
          <span class="token keyword">if</span><span class="token punctuation">(</span>index <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            box <span class="token operator">=</span> This<span class="token punctuation">.</span>MenuData<span class="token punctuation">[</span><span class="token function">eval</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>
            box <span class="token operator">=</span> box<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token function">eval</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token punctuation">&#125;</span>

          <span class="token keyword">return</span> box<span class="token punctuation">.</span>title<span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'toBreadcrumb'</span><span class="token punctuation">,</span>mapText<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>vueXä»£ç </p>
<pre class="line-numbers language-JS" data-language="JS"><code class="language-JS">import Vue from &#39;vue&#39;
import Vuex from &#39;vuex&#39;
Vue.use(Vuex)
export default new Vuex.Store(&#123;
  state: &#123;
    Breadcrumb:[],  &#x2F;&#x2F; é¢åŒ…å±‘å¯¼èˆª
    userName: &#39;&#39;,
    readyData:&quot;&quot;
  &#125;,
  mutations: &#123;
    toBreadcrumb(state,arr)&#123;
      state.Breadcrumb &#x3D; arr;
    &#125;
  &#125;,
  getters: &#123;
    getBreadcrumb: state &#x3D;&gt; &#123;
      return state.Breadcrumb
    &#125;
  &#125;
&#125;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>é¢åŒ…å±‘ç»„ä»¶</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Header</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Row</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>12<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
          <span class="token comment">&lt;!-- &#123;&#123;doneTodosCount&#125;&#125; --></span>
        	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Breadcrumb</span><span class="token punctuation">></span></span>
		        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>BreadcrumbItem</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item in doneTodosCount<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123;item&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>BreadcrumbItem</span><span class="token punctuation">></span></span>
		    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Breadcrumb</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Col</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>12<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Login</span> <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Col</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Row</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Header</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> Login <span class="token keyword">from</span> <span class="token string">'@/components/Login'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">created</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'toBreadcrumb'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'é¦–é¡µ'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  computed<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token function">doneTodosCount</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>Breadcrumb
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span><span class="token punctuation">&#123;</span>
    Login
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="11-iviewä¸Šä¼ ç»„ä»¶æ‰‹åŠ¨ä¸Šä¼ -æ¥å…¥å¯Œæ–‡æœ¬ç¼–è¾‘å™¨"><a href="#11-iviewä¸Šä¼ ç»„ä»¶æ‰‹åŠ¨ä¸Šä¼ -æ¥å…¥å¯Œæ–‡æœ¬ç¼–è¾‘å™¨" class="headerlink" title="11. iviewä¸Šä¼ ç»„ä»¶æ‰‹åŠ¨ä¸Šä¼ ,æ¥å…¥å¯Œæ–‡æœ¬ç¼–è¾‘å™¨"></a>11. iviewä¸Šä¼ ç»„ä»¶æ‰‹åŠ¨ä¸Šä¼ ,æ¥å…¥å¯Œæ–‡æœ¬ç¼–è¾‘å™¨</h3><p>iviewæä¾›çš„ç»„ä»¶ç‰¹åˆ«ä¸°å¯Œï¼Œæˆ‘ä»¬åœ¨åšå›¾ç‰‡ä¸Šä¼ çš„æ—¶å€™ï¼Œéœ€è¦æ‰‹åŠ¨ä¸Šä¼ ï¼Œéœ€è¦è°ƒç”¨å­ç»„ä»¶çš„fileå¯¹è±¡é€šè¿‡è‡ªå·±çš„postæ–¹æ³•æäº¤åˆ°æœåŠ¡ç«¯ï¼ŒactionDateä¸ºæ–‡ä»¶æ•°æ®ï¼Œç„¶åå†é€šè¿‡on-successå›è°ƒåé¦ˆä¸Šä¼ æˆåŠŸæˆ–å¤±è´¥ã€‚<br><strong>æ‰‹åŠ¨ä¸Šä¼ :</strong></p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Upload</span>
     <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upload<span class="token punctuation">"</span></span>
    <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>actionDate<span class="token punctuation">"</span></span>
    <span class="token attr-name">:on-success</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleSuccess<span class="token punctuation">"</span></span>
    <span class="token attr-name">:format</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>[<span class="token punctuation">'</span>png<span class="token punctuation">'</span>,<span class="token punctuation">'</span>jpg<span class="token punctuation">'</span>]<span class="token punctuation">"</span></span>
    <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/api/upload/ccupload<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ios-cloud-upload-outline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç‚¹å‡»ä¸Šä¼ æ–‡ä»¶<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Upload</span><span class="token punctuation">></span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file !== null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    ä¸Šä¼ æ–‡ä»¶: &#123;&#123; file.name &#125;&#125; 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upload<span class="token punctuation">"</span></span> <span class="token attr-name">:loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loadingStatus<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; loadingStatus ? 'Uploading' : 'ä¸Šä¼ ' &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// upload æ–¹æ³•</span>
<span class="token keyword">let</span> uploadFile <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>file
<span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>actionDate<span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>uploadFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>loadingStatus <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

<span class="token comment">// handleSuccess æ–¹æ³•</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>loadingStatus <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">==</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$Message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'ä¸Šä¼ æˆåŠŸ'</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$Message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'ä¸Šä¼ å¤±è´¥'</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>æˆ‘ä»¬åœ¨è”è°ƒçš„è¿‡ç¨‹ä¸­åç«¯è¯´æ¥æ”¶ä¸åˆ°æ–‡ä»¶ï¼Œæˆ‘ä»¬åªèƒ½ç”¨nodeæ¥éªŒè¯ä¸€ä¸‹æ˜¯ä¸æ˜¯ç»„ä»¶æœ‰é—®é¢˜ï¼Œäºæ˜¯ç”¨expresså†™äº†ä¸€ä¸‹æ–‡ä»¶ä¸Šä¼ ã€‚</p>
<pre class="line-numbers language-JS" data-language="JS"><code class="language-JS">var express &#x3D; require(&#39;express&#39;);
var router &#x3D; express.Router();
let fs &#x3D; require(&#39;fs&#39;)
var formidable &#x3D; require(&#39;formidable&#39;);&#x2F;&#x2F;è¡¨å•æ§ä»¶
var path &#x3D; require(&#39;path&#39;);
var app &#x3D; express();
app.use(express.static(&#39;&#x2F;public&#x2F;&#39;));

router.post(&#39;&#x2F;test&#39;,(req,res)&#x3D;&gt;&#123;
	var imgPath &#x3D; path.dirname(__dirname) + &#39;&#x2F;public&#39;;
	var form &#x3D; new formidable.IncomingForm();
	form.encoding &#x3D; &#39;utf-8&#39;; &#x2F;&#x2F;è®¾ç½®ç¼–è¾‘ 
	form.uploadDir &#x3D; imgPath; &#x2F;&#x2F;è®¾ç½®ä¸Šä¼ ç›®å½•
	form.keepExtensions &#x3D; true; &#x2F;&#x2F;ä¿ç•™åç¼€
	form.maxFieldsSize &#x3D; 2 * 1024 * 1024; &#x2F;&#x2F;æ–‡ä»¶å¤§å°
	form.type &#x3D; true;

	form.parse(req, function(err, fields, files)&#123;
		let src &#x3D; files.img.path.split(&#39;&#x2F;&#39;);
		let urlString &#x3D; src[src.length-1]
	  	if (err) &#123;
	      console.log(err);
	      req.flash(&#39;error&#39;,&#39;å›¾ç‰‡ä¸Šä¼ å¤±è´¥&#39;);
	      return;
	  &#125;
	  res.json(&#123;
	      code: &#39;200&#39;,
	      type:&#39;single&#39;,
	      url:&#39;http:&#x2F;&#x2F;10.70.74.167:3000&#x2F;&#39;+urlString
	  &#125;)
	&#125;);
&#125;);

module.exports &#x3D; router;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æˆ‘ä»¬åœ¨æµ‹è¯•çš„æ—¶å€™å¢åŠ äº†ä¸€ä¸ªå›¾ç‰‡testçš„è½¬å‘é…ç½®ï¼Œç„¶åæŠŠç»„ä»¶çš„actionåœ°å€æ›¿æ¢ä¸€ä¸‹ä¸º<code>/test/</code>å°±å¯ä»¥äº†ï¼Œäº²æµ‹æ— é—®é¢˜[é˜´é™©è„¸]ã€‚<br><strong>vue.config.js</strong></p>
<pre class="line-numbers language-JS" data-language="JS"><code class="language-JS">module.exports &#x3D; &#123;
  baseUrl: baseUrl,
  devServer: &#123;
    proxy: &#123;
        &#39;&#x2F;api&#39;: &#123; &#x2F;&#x2F; å¼€å‘æœåŠ¡å™¨
            target: &#39; http:&#x2F;&#x2F;*******&#39;,
            changeOrigin: true,
        &#125;,
        &#39;&#x2F;test&#39;: &#123; &#x2F;&#x2F; å›¾ç‰‡ä¸Šä¼ æµ‹è¯•
            target: &#39; http:&#x2F;&#x2F;10.70.74.167:3000&#39;,
            changeOrigin: true,
        &#125;
    &#125;
  &#125;,
  productionSourceMap: false,
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p>å¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„å›¾ç‰‡ä¸Šä¼ æœ‰ä¸¤ç§æ¨¡å¼ï¼Œä¸€ç§æ˜¯æŠŠå›¾ç‰‡è½¬æˆbase64ï¼Œé€šè¿‡ä¸€ä¸ªæ¥å£æŠŠhtmlå†…å®¹æäº¤ç»™æœåŠ¡ç«¯ï¼Œå¦ä¸€ç§æ¨¡å¼æ˜¯ä¸¤ä¸ªæ¥å£ï¼Œåˆ†åˆ«æŠŠå›¾ç‰‡ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œç„¶åè¿”å›urlå­—ç¬¦ä¸²åˆ°ç¼–è¾‘å™¨ä¸­ï¼Œå†æŠŠç¼–è¾‘å™¨ä¸­çš„htmlä¿å­˜åˆ°æœåŠ¡å™¨ä¸Šï¼Œæˆ‘ä»¬ç”¨çš„ç¼–è¾‘å™¨æ˜¯<code>vue-quill-editor</code>ï¼Œä½¿ç”¨ç¬¬äºŒç§æ¨¡å¼ï¼Œå€ŸåŠ©elementçš„el-uploadç»„ä»¶è‡ªåŠ¨ä¸Šä¼ å›¾ç‰‡ï¼Œç„¶åè¿”å›åœ°å€æ’å…¥åˆ°ç¼–è¾‘å™¨ã€‚</p>
<pre class="line-numbers language-JS" data-language="JS"><code class="language-JS">import &#123;format&#125; from &#39;@&#x2F;lib&#x2F;js&#x2F;utils.js&#39;
	import &#123;quillEditor&#125; from &#39;vue-quill-editor&#39;
	const toolbarOptions &#x3D; [
	    [&#39;bold&#39;, &#39;italic&#39;, &#39;underline&#39;, &#39;strike&#39;],        &#x2F;&#x2F; toggled buttons
	    [&#123;&#39;header&#39;: 1&#125;, &#123;&#39;header&#39;: 2&#125;],               &#x2F;&#x2F; custom button values
	    [&#123;&#39;list&#39;: &#39;ordered&#39;&#125;, &#123;&#39;list&#39;: &#39;bullet&#39;&#125;],
	    [&#123;&#39;indent&#39;: &#39;-1&#39;&#125;, &#123;&#39;indent&#39;: &#39;+1&#39;&#125;],          &#x2F;&#x2F; outdent&#x2F;indent
	    [&#123;&#39;direction&#39;: &#39;rtl&#39;&#125;],                         &#x2F;&#x2F; text direction
	    [&#123;&#39;size&#39;: [&#39;small&#39;, false, &#39;large&#39;, &#39;huge&#39;]&#125;],  &#x2F;&#x2F; custom dropdown
	    [&#123;&#39;header&#39;: [1, 2, 3, 4, 5, 6, false]&#125;],
	    [&#123;&#39;color&#39;: []&#125;, &#123;&#39;background&#39;: []&#125;],          &#x2F;&#x2F; dropdown with defaults from theme
	    [&#123;&#39;font&#39;: []&#125;],
	    [&#123;&#39;align&#39;: []&#125;],
	    [&#39;link&#39;, &#39;image&#39;],
	    [&#39;clean&#39;]
	  ]
    export default &#123;
        data () &#123;
            return &#123;
            	options2:&#123;&#125;,
            	quillUpdateImg: false, &#x2F;&#x2F; æ ¹æ®å›¾ç‰‡ä¸Šä¼ çŠ¶æ€æ¥ç¡®å®šæ˜¯å¦æ˜¾ç¤ºloadingåŠ¨ç”»ï¼Œåˆšå¼€å§‹æ˜¯false,ä¸æ˜¾ç¤º
            	content:&#39;&#39;, &#x2F;&#x2F; å¯Œæ–‡æœ¬å†…å®¹
            	title:&#39;æ–°å»º&#39;,
                editorOption:&#123;
	            	placeholder: &#39;&#39;,
	      			theme: &#39;snow&#39;,  &#x2F;&#x2F; or &#39;bubble&#39;
	      			modules:&#123;
			            toolbar: &#123;
			              container: toolbarOptions,
			              handlers: &#123;
			                &#39;image&#39;: function (value) &#123;
			                  if (value) &#123;
			                    &#x2F;&#x2F; è§¦å‘inputæ¡†é€‰æ‹©å›¾ç‰‡æ–‡ä»¶
			                    document.querySelector(&#39;.avatar-uploader input&#39;).click()
			                  &#125; else &#123;
			                    this.quill.format(&#39;image&#39;, false);
			                  &#125;
			                &#125;
			              &#125;
			            &#125;
			        &#125;
                &#125;,
		        serverUrl: &#39;&#x2F;api&#x2F;add&#x2F;upload?key&#x3D;&#39;+this.$route.params.key,  &#x2F;&#x2F; è¿™é‡Œå†™ä½ è¦ä¸Šä¼ çš„å›¾ç‰‡æœåŠ¡å™¨åœ°å€
		        header: &#123;
		          &#x2F;&#x2F; token: sessionStorage.token
		        &#125;,
                current: 0,
                formValidate: &#123;
                    device_name: &#39;é›†å›¢BI&#39;,
                    versions: &#39;&#39;,
                    publish_time: &#39;&#39;,
                    desc: &#39;&#39;,
                &#125;,
                ruleValidate: &#123;
                    device_name: [
                        &#123; required: true, message: &#39;è¯·é€‰æ‹©ç³»ç»Ÿåç§°&#39;, trigger: &#39;change&#39; &#125;
                    ],
                    versions: [
                        &#123; required: true, message: &#39;è¯·è¾“å…¥ç‰ˆæœ¬ä¿¡æ¯&#39;, trigger: &#39;blur&#39; &#125;
                    ],
                    publish_time: [
                        &#123; required: true, type: &#39;date&#39;, message: &#39;è¯·é€‰æ‹©å‘ç‰ˆæ—¶é—´&#39;, trigger: &#39;change&#39; &#125;
                    ],
                    desc: [
                        &#123; required: true, message: &#39;è¯·è¾“å…¥å¯¹äºè¯¥ç‰ˆæœ¬çš„æ€»ä½“æè¿°&#39;, trigger: &#39;blur&#39; &#125;,
                        &#123; type: &#39;string&#39;, min: 20, message: &#39;ç‰ˆæœ¬çš„æ€»ä½“æè¿°ä¸å°‘äº20ä¸ªå­—&#39;, trigger: &#39;blur&#39; &#125;
                    ]
                &#125;,
                isFirst: true,
                isSecond: false,
                isThird: false,
                versionid:&#39;&#39;
            &#125;
        &#125;,
        created:function()&#123;
        	this.limit();
        	this.initialization();
       	&#125;,
        methods: &#123;
        	limit()&#123;
                this.options2 &#x3D;  &#123;
                  disabledDate (date) &#123;
                    return (date &amp;&amp; date.valueOf() &gt; new Date().getTime()) || (date &amp;&amp; date.valueOf() &lt; new Date(&quot;2017-12-31&quot;))
                  &#125;
                &#125;
            &#125;,
        	&#x2F;&#x2F;åˆå§‹åˆ¤å®šæ˜¯æ–°å¢&#x2F;ä¿®æ”¹
        	initialization()&#123;
        		let id &#x3D; this.$route.params.id;
        		if(id !&#x3D;0)&#123;
        			this.title &#x3D; &quot;ç¼–è¾‘&quot;;
        			let obj &#x3D; &#123;&#125;;
        			obj.version_id &#x3D; this.$route.params.id;
        			obj.key &#x3D; this.$route.params.key;
        			this.$http
			            .post(&#39;&#x2F;api&#x2F;show&#x2F;version&#39;,obj).then(response &#x3D;&gt; (
			               this.formValidate.device_name &#x3D; response.data.data.device_name,
			               this.formValidate.versions &#x3D; response.data.data.versions,
			               this.formValidate.publish_time &#x3D; response.data.data.publish_time,
			               this.formValidate.desc &#x3D; response.data.data.desc,
			               this.content &#x3D; response.data.data.pc_html
			        ))

        		&#125;else&#123;
        			this.title &#x3D; &quot;æ–°å»º&quot;;
        		&#125;
        	&#125;,
        	&#x2F;&#x2F;ç¬¬ä¸€æ­¥åŸºæœ¬ä¿¡æ¯ï¼ˆå‘å¸ƒï¼‰
        	firstSubmit(name)&#123;
        		this.$refs[name].validate((valid) &#x3D;&gt; &#123;
                    if (valid) &#123;
                        this.$Message.success(&#39;ä¿¡æ¯æ·»åŠ æˆåŠŸ&#39;);
                        this.current +&#x3D; 1;
                        this.isFirst &#x3D; !this.isFirst;
                        this.isSecond &#x3D; !this.isSecond;
                    &#125;else&#123;
                        this.$Message.error(&#39;è¯·å®Œå–„å¿…å¡«ä¿¡æ¯&#39;);
                    &#125;
                &#125;)
        	&#125;,
        	&#x2F;&#x2F;ç¬¬äºŒæ­¥çš„è¡¨å•æ•°æ®æäº¤ï¼ˆå‘å¸ƒï¼‰
        	save()&#123;
        		let id &#x3D; this.$route.params.id;
        		let addObj &#x3D; this.formValidate;
        		addObj.publish_time &#x3D; format(this.formValidate.publish_time);
        		addObj.pc_html &#x3D; this.content;
        		addObj.key &#x3D; this.$route.params.key;
        		if(this.$route.params.id !&#x3D; 0)&#123;
        			addObj.version_id &#x3D; id;
        		&#125;
        		this.$http
		            .post(&#39;&#x2F;api&#x2F;add&#x2F;version&#39;,addObj).then(response &#x3D;&gt; (
		               this.secondSubmit(response.data.version_id)
		        ))
        	&#125;,
        	&#x2F;&#x2F;ç¬¬äºŒæ­¥æäº¤æˆåŠŸåè½¬è‡³ç¬¬ä¸‰æ­¥ï¼ˆå‘å¸ƒï¼‰
        	secondSubmit(id)&#123;
        		this.current +&#x3D; 1;
                this.isSecond &#x3D; false;
                this.isThird &#x3D; !this.isThird;
                this.versionid &#x3D; id;
        	&#125;,
        	&#x2F;&#x2F;ç¬¬ä¸‰æ­¥è·³è½¬è‡³[é¢„è§ˆ]
        	preview()&#123;
        		this.$router.push(&#123; path:&quot;&#x2F;Main&#x2F;VersionManagementInfo&#x2F;system_versions&#x2F;&quot;+this.versionid&#125;);
        	&#125;,
        	&#x2F;&#x2F;ç¬¬ä¸‰æ­¥å‘å¸ƒ
        	release()&#123;
        		let status &#x3D; this.$route.params.status;
        		if(status !&#x3D; 2)&#123;
        			let obj &#x3D; &#123;&#125;;
        			if(this.$route.params.id &#x3D;&#x3D; 0)&#123;
        				obj.version_id &#x3D; this.versionid;
        			&#125;else&#123;
        				obj.version_id &#x3D; this.$route.params.id;
        			&#125;
	        		obj.key &#x3D; this.$route.params.key;
	        		this.$http
			            .post(&#39;&#x2F;api&#x2F;edit&#x2F;publish&#x2F;version&#39;,obj).then(response &#x3D;&gt; (
			               this.releaseLink()
			        ))
        		&#125;else&#123;
        			this.releaseLink()
        		&#125;

        	&#125;,
        	&#x2F;&#x2F;ç¬¬ä¸‰æ­¥å‘å¸ƒè·³è½¬
        	releaseLink()&#123;
        		this.$router.push(&#123; path:&quot;&#x2F;Main&#x2F;VersionManagement&#x2F;system_versions&quot;&#125;);
        	&#125;,
        	&#x2F;&#x2F;ä¸Šä¸€æ­¥æ“ä½œ
            returns () &#123;
                if (this.current !&#x3D; 0) &#123;
                    this.current -&#x3D; 1;
                    this.isFirst &#x3D; true;
                    this.isSecond &#x3D; false;
                &#125;
            &#125;,
            &#x2F;&#x2F;å¯Œæ–‡æœ¬å†…å®¹æ”¹å˜äº‹ä»¶
            onEditorChange(&#123;editor, html, text&#125;) &#123;
		        this.content &#x3D; html
		     &#125;,
		    &#x2F;&#x2F;å¯Œæ–‡æœ¬å›¾ç‰‡ä¸Šä¼ å‰
		    beforeUpload() &#123;
		        &#x2F;&#x2F; æ˜¾ç¤ºloadingåŠ¨ç”»
		        this.quillUpdateImg &#x3D; true
		    &#125;,
		    &#x2F;&#x2F;å¯Œæ–‡æœ¬å›¾ç‰‡ä¸Šä¼ æˆåŠŸ
		    uploadSuccess(res, file) &#123;
		        &#x2F;&#x2F; resä¸ºå›¾ç‰‡æœåŠ¡å™¨è¿”å›çš„æ•°æ®
		        &#x2F;&#x2F; è·å–å¯Œæ–‡æœ¬ç»„ä»¶å®ä¾‹
		        console.log(res,file);
		        let quill &#x3D; this.$refs.myQuillEditor.quill
		        &#x2F;&#x2F; å¦‚æœä¸Šä¼ æˆåŠŸ
		        if (res.code &#x3D;&#x3D; 1000 ) &#123;
		          &#x2F;&#x2F; è·å–å…‰æ ‡æ‰€åœ¨ä½ç½®
		          let length &#x3D; quill.getSelection().index;
		          &#x2F;&#x2F; æ’å…¥å›¾ç‰‡  res.urlä¸ºæœåŠ¡å™¨è¿”å›çš„å›¾ç‰‡åœ°å€
		          quill.insertEmbed(length, &#39;image&#39;, res.data)
		          &#x2F;&#x2F; è°ƒæ•´å…‰æ ‡åˆ°æœ€å
		          quill.setSelection(length + 1)
		        &#125; else &#123;
		          this.$message.error(&#39;å›¾ç‰‡æ’å…¥å¤±è´¥&#39;)
		        &#125;
		        &#x2F;&#x2F; loadingåŠ¨ç”»æ¶ˆå¤±
		        this.quillUpdateImg &#x3D; false
	      	&#125;,
		    &#x2F;&#x2F; å¯Œæ–‡æœ¬å›¾ç‰‡ä¸Šä¼ å¤±è´¥
		    uploadError() &#123;
		        &#x2F;&#x2F; loadingåŠ¨ç”»æ¶ˆå¤±
		        this.quillUpdateImg &#x3D; false
		        this.$message.error(&#39;å›¾ç‰‡æ’å…¥å¤±è´¥&#39;)
		    &#125;,
		 
        &#125;
    &#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>




<h3 id="12-ä½¿ç”¨cheerioå±•ç¤ºå­—ç¬¦ä¸²è¡¨æ ¼"><a href="#12-ä½¿ç”¨cheerioå±•ç¤ºå­—ç¬¦ä¸²è¡¨æ ¼" class="headerlink" title="12. ä½¿ç”¨cheerioå±•ç¤ºå­—ç¬¦ä¸²è¡¨æ ¼"></a>12. ä½¿ç”¨cheerioå±•ç¤ºå­—ç¬¦ä¸²è¡¨æ ¼</h3><p>æœ‰ä¸€éƒ¨åˆ†è¡¨æ ¼æ•°æ®æ¯”è¾ƒéš¾å¤„ç†ï¼Œæ˜¯åç«¯ç›´æ¥æŠŠxlsxæ–‡ä»¶è½¬æˆå­—ç¬¦ä¸²å‘ç»™å‰ç«¯ï¼Œcheerioå¯ä»¥æŠŠå­—ç¬¦ä¸²è½¬ä¸ºç±»ä¼¼jqueryå¯¹è±¡çš„è™šæ‹ŸDOMï¼Œç„¶åç”¨jqueryçš„apiæ“ä½œè¿™ä¸ªè™šæ‹ŸDOMã€‚</p>
<pre class="line-numbers language-none"><code class="language-none">import cheerio from &quot;cheerio&quot;
this.$http.post(&#39;&#x2F;api&#x2F;list&#x2F;statement-table&#39;,p).then(function(response)&#123;
               if(response.data&#x3D;&#x3D;&quot;&quot;)&#123;
                  This.isShow&#x3D;false;This.content&#x3D;true;This.title&#x3D;false&#x2F;&#x2F;æ— æ•°æ®æ—¶æ•°æ®åŠ è½½ä¸­å’Œæ ‡é¢˜æ•°æ®çš„ç›’å­éšè—
                  This.message&#x3D;&quot;&lt;div style&#x3D;&#39;text-align:center&#39;&gt;æš‚æ— æ•°æ®&lt;&#x2F;div&gt;&quot;
               &#125;else&#123;
                    &#x2F;&#x2F;console.log(response)
                    This.isShow&#x3D;false;
                    This.content&#x3D;true;&#x2F;&#x2F;æœ‰æ•°æ®æ—¶ æ•°æ®åŠ è½½ä¸­éšè— æ ‡é¢˜å’Œè¡¨ä½“æ˜¾ç¤º
                    let $ &#x3D; cheerio.load(response.data);
                    &#x2F;&#x2F;åˆ é™¤è‡ªå¸¦çš„è¡Œå†…æ ·å¼
                    $(&quot;body style&quot;).remove();
                    $(&quot;body table&quot;).css(&#123;&quot;border&quot;:&quot;1px solid #e8eaec&quot; &#125;);
                    $(&quot;body table td&quot;).css(&#123;&quot;border&quot;:&quot;1px solid #e8eaec&quot;,&quot;padding&quot;:&quot;10px&quot;,&quot;color&quot;:&quot;#515a6e&quot;&#125;);
                    &#x2F;&#x2F;å…¨æ–‡åŒ¹é… å‰”é™¤&amp;quot;
                    This.message &#x3D; $(&quot;body&quot;).html().replace(&#x2F;&amp;quot;&#x2F;g,&quot;&quot;);
               &#125;
           &#125;)

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h3 id="13-keep-liveç»„ä»¶ç¼“å­˜"><a href="#13-keep-liveç»„ä»¶ç¼“å­˜" class="headerlink" title="13. keep-liveç»„ä»¶ç¼“å­˜"></a>13. keep-liveç»„ä»¶ç¼“å­˜</h3><p>äº§å“çš„éœ€æ±‚æ˜¯ä»åˆ—è¡¨é¡µé¢ç‚¹å‡»æŸ¥çœ‹æŒ‰é’®è¿›å…¥è¯¦æƒ…é¡µé¢ï¼Œè¯¦æƒ…é¡µé¢å†ç‚¹å‡»è¿”å›ï¼Œåˆ—è¡¨é¡µé¢è¦ä¸èƒ½åˆ·æ–°ï¼Œå°±éœ€è¦æŠŠç»„ä»¶ç¼“å­˜èµ·æ¥ã€‚</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/3/11/1696bbd3e9ddfa00?w=1006&h=503&f=gif&s=256501"><br>ç»„ä»¶ç¼“å­˜ç›´æ¥åŠ <code>keep-live</code>å°±å¯ä»¥äº†ï¼Œæ¯”è¾ƒéº»çƒ¦çš„æ˜¯æˆ‘ä»¬åœ¨è¿™ä¸ªç»„ä»¶é‡Œåˆ¤æ–­ä¸‰ç§æƒ…å†µï¼Œ1.ç¬¬ä¸€æ¬¡è¿›å…¥ 2.ä»å…¶ä»–æ ç›®è¿›å…¥ 3.ä»è¯¦æƒ…é¡µè¿›å…¥ï¼Œå¦‚æœä»ä¸º1ã€2è¿™ä¸¤ç§æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦åˆ·æ–°é¡µé¢ï¼Œå¦‚æœæ˜¯3ï¼Œåˆ™ä¸åˆ·æ–°ã€‚</p>
<p>æ€è·¯æ˜¯ï¼š<br><code>created</code>é’©å­ä¸­ç€å¢åŠ <code>isFirstEnter</code>æ ‡è¯†ï¼Œ<code>beforeRouteEnter</code>é’©å­ä¸­åˆ¤æ–­æ˜¯å¦ä¸ºè¯¦æƒ…é¡µé¢è¿”å›ï¼Œå¦‚æœæ˜¯åˆ™åŠ ä¸Š<code>meta.isBack</code>çš„æ ‡è¯†ï¼Œåœ¨<code>activated</code>é’©å­é‡Œåˆ¤æ–­æ˜¯ç¬¬å‡ ç§æƒ…å†µï¼Œå¦‚æœä¸º1æˆ–2ï¼Œåˆ™é‡æ–°è¯·æ±‚åˆ—è¡¨é¡µæ•°æ®ï¼Œå¦‚æœæ˜¯3å°±ä¸ç”¨åŠ¨ç®¡äº†ã€‚</p>
<p><code>router.js</code>å¢åŠ æ ‡è¯†metaçš„<code>keepAlive</code>å’Œ<code>isBack</code></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">/******** ä¸šåŠ¡æŠ¥è¡¨ Start ********/</span>
<span class="token punctuation">&#123;</span>
    path<span class="token operator">:</span> <span class="token string">'/Main/BusinessReport/:key'</span><span class="token punctuation">,</span> <span class="token comment">// ä¸šåŠ¡æŠ¥è¡¨-åˆ—è¡¨</span>
    name<span class="token operator">:</span> <span class="token string">'BusinessReport'</span><span class="token punctuation">,</span>
    meta<span class="token operator">:</span> <span class="token punctuation">&#123;</span> keepAlive<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>isBack<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./pages/BusinessReport/index.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#123;</span>
    path<span class="token operator">:</span> <span class="token string">'/Main/BusinessReportInfo/:sn/:is_check/:key/:type/:cmd5/:time/:is_down'</span><span class="token punctuation">,</span> <span class="token comment">// ä¸šåŠ¡æŠ¥è¡¨-è¯¦æƒ…</span>
    name<span class="token operator">:</span> <span class="token string">'BusinessReportInfo'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./pages/BusinessReportInfo/index.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token comment">/******** ä¸šåŠ¡æŠ¥è¡¨ End ********/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æ ¹æ®<code>mate.keepAlive</code>æ¸²æŸ“ä¸åŒçš„<code>router-view</code>ï¼ˆå¿˜è®°ä¸ºä»€ä¹ˆæ˜¯è¿™ä¹ˆå†™çš„äº†ï¼Œæ„Ÿè§‰å¾ˆlowï¼‰ã€‚</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;keep-alive&gt;
    &lt;router-view v-if&#x3D;&quot;$route.meta.keepAlive&quot; &gt;&lt;&#x2F;router-view&gt;
&lt;&#x2F;keep-alive&gt;
&lt;router-view v-if&#x3D;&quot;!$route.meta.keepAlive&quot; &gt;
    &lt;!-- è¿™é‡Œæ˜¯ä¸è¢«ç¼“å­˜çš„è§†å›¾ç»„ä»¶ï¼Œæ¯”å¦‚ Editï¼ --&gt;
&lt;&#x2F;router-view&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ç»„ä»¶ä»£ç é’©å­äº‹ä»¶<code>created</code>ã€<code>beforeRouteEnter</code>ã€<code>activated</code>æ–¹æ³•</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span><span class="token punctuation">&#123;</span>
        isFirstEnter<span class="token operator">:</span><span class="token boolean">false</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token function-variable function">created</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>isFirstEnter <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token function">beforeRouteEnter</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>from<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'BusinessReportInfo'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">//åˆ¤æ–­æ˜¯ä»å“ªä¸ªè·¯ç”±è¿‡æ¥çš„ï¼Œè‹¥æ˜¯BusinessReportInfoé¡µé¢ä¸éœ€è¦åˆ·æ–°è·å–æ–°æ•°æ®ï¼Œç›´æ¥ç”¨ä¹‹å‰ç¼“å­˜çš„æ•°æ®å³å¯</span>
      to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>isBack <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token function">activated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>isBack <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isFirstEnter<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token operator">=</span><span class="token string">""</span>
        <span class="token comment">//å¦‚æœisBackæ˜¯falseï¼Œè¡¨æ˜éœ€è¦è·å–æ–°æ•°æ®ï¼Œå¦åˆ™å°±ä¸å†è¯·æ±‚ï¼Œç›´æ¥ä½¿ç”¨ç¼“å­˜çš„æ•°æ®</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ajaxè·å–æ•°æ®æ–¹æ³•</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>isBack <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>isFirstEnter<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token comment">//æ¢å¤æˆé»˜è®¤çš„falseï¼Œé¿å…isBackä¸€ç›´æ˜¯trueï¼Œå¯¼è‡´ä¸‹æ¬¡æ— æ³•è·å–æ•°æ®</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="14-ä¸è¦åœ¨å­ç»„ä»¶ä¸­æ“ä½œçˆ¶ç»„ä»¶çš„æ•°æ®"><a href="#14-ä¸è¦åœ¨å­ç»„ä»¶ä¸­æ“ä½œçˆ¶ç»„ä»¶çš„æ•°æ®" class="headerlink" title="14. ä¸è¦åœ¨å­ç»„ä»¶ä¸­æ“ä½œçˆ¶ç»„ä»¶çš„æ•°æ®"></a>14. ä¸è¦åœ¨å­ç»„ä»¶ä¸­æ“ä½œçˆ¶ç»„ä»¶çš„æ•°æ®</h3><p>ç¡®å®å¯ä»¥åœ¨å­ç»„ä»¶ä¸­ä¿®æ”¹çˆ¶ç»„ä»¶çš„æ•°æ®ï¼Œä½†å¼ºçƒˆå»ºè®®ä¸è¦åœ¨å­ç»„ä»¶ä¸­æ“ä½œçˆ¶ç»„ä»¶æ•°æ®ï¼ŒæœŸé—´æˆ‘æ¥æ‰‹è¿‡ä¸€ä¸ªåŠŸèƒ½ï¼Œæ¢³ç†äº†åŠå¤©é€»è¾‘ï¼Œæ²¡æ‰¾åˆ°è§¦å‘ç‚¹åœ¨å“ªé‡Œï¼ŒåŸæ¥æ˜¯åœ¨å­ç»„ä»¶ä¸­æ“ä½œäº†çˆ¶ç»„ä»¶çš„æ•°æ®ï¼Œä¸åˆ©äºç»´æŠ¤ï¼Œæˆ‘è‡ªå·±èµ·äº†ä¸ªåå­—ï¼Œè®©æ•°æ®ä¿æŒå•å‘æµåŠ¨ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯å¯ä»¥å®šä¹‰ä¸ºå•é¡¹æ•°æ®äº†åŸåˆ™ğŸ˜‚ã€‚</p>
<p>åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­æˆ‘ä»¬å‘ç°ï¼Œæ¯ä¸ªäººå†™çš„ä¸šåŠ¡ç»„ä»¶ä»£ç é£æ ¼éƒ½ä¸ä¸€è‡´ï¼Œæ€æ ·æ˜¯ä¸€è‡´ï¼Œå…³äºä¸šåŠ¡ç»„ä»¶ï¼Œæœ‰æ²¡æœ‰å¥½çš„è§„èŒƒæˆ–è€…åŸåˆ™å‘¢ï¼Ÿè¿˜å¸Œæœ›å¤§å®¶ç»™ç‚¹èµ„æ–™å’Œå»ºè®®éå¸¸æ„Ÿè°¢ã€‚</p>

  <p> â€” 2021å¹´7æœˆ4æ—¥</p>
  


          <div class="row mt-2">
  
    <div class="eight columns">
      <p id="madewith" style="color: #c7c7c7;">é™æ°´æµæ·±ï¼Œé—»å–§äº«é™ã€‚ç©ºå±±é¸£å“ï¼Œè§æƒ¯å¸ç©ºã€‚
        
    </div>

    <!-- Sepcial thanks to https://simpleicons.org/ for the icons -->
    <div class="four columns mb-3 posisi" >
      
      <a class="ml-0 footer-link icon" href="https://github.com/nihaojob" target="_blank" style="text-decoration: none" rel="noreferrer" aria-label="GitHub">
        <svg class="github svg-hov" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
      </a>
      

      

      

      

      

    </div>
  
</div>

        </div>
      </div>

    </div>

  </div>
  <script src="/js/nanobar.min.js"></script>
  <script>
    var options = {
      classname: 'nanobar',
      id: 'myNanobar'
    };
    var nanobar = new Nanobar(options);
    nanobar.go(30);
    nanobar.go(76);
    nanobar.go(100);
  </script>

</body>

</html>
