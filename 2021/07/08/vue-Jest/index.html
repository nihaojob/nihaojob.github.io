<!DOCTYPE html>
<html lang="en">

<head>

  <!-- Minima -->
  <!-- Hexo theme created by @adisaktijrs -->

  <!-- Basic Page Needs
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <meta charset="utf-8">

  
  <title>Vueä¸šåŠ¡ç³»ç»Ÿè½åœ°å•å…ƒæµ‹è¯•</title>
  
  <link rel="canonical" href="https://nihaojob.github.io/2021/07/08/vue-Jest/">
  
  <meta name="description" content="ä¸€ç›´å¯¹å•æµ‹å¾ˆæ„Ÿå…´è¶£ï¼Œä½†å¯¹å•æµ‹è¦†ç›–ç‡ã€æµ‹è¯•æŠ¥å‘Šç­‰å…³é”®è¯æ‡µæ‡µæ‡‚æ‡‚ï¼Œæœ€è¿‘å‡ ä¸ªæœˆä¸€ç›´åœ¨æ‘¸ç´¢å¦‚ä½•åœ¨Vueä¸šåŠ¡ç³»ç»Ÿä¸­è½åœ°å•å…ƒæµ‹è¯•ï¼Œçœ‹åˆ°æ…¢æ…¢å¢é•¿çš„è¦†ç›–ç‡ï¼Œæ…¢æ…¢æ¸…æ™°çš„æ¨¡å—ï¼Œå¯¹å•å…ƒæµ‹è¯•çš„ç†è§£ä¹Ÿæ¯”ä»¥å‰æ›´åŠ æ·±å…¥ï¼Œä¹Ÿæœ‰ä¸€äº›å¿ƒå¾—å’Œæ”¶è·ã€‚ ä»Šå¤©æŠŠè‡ªå·±çš„ç¬”è®°åˆ†äº«å‡ºæ¥ï¼Œå’Œå¤§å®¶ä¸€èµ·äº¤æµæˆ‘åœ¨2ä¸ªè¾ƒä¸ºå¤æ‚çš„Vueä¸šåŠ¡ç³»ç»Ÿä¸­è½åœ°å•æµ‹çš„ä¸€äº›">
  
  
  <meta name="author" content="nihaojob@163.com">
  
  <meta property="og:image" content="https://nihaojob.github.ioundefined">
  
  <meta property="og:site_name" content="ç§¦å°‘å«çš„åšå®¢" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="Vueä¸šåŠ¡ç³»ç»Ÿè½åœ°å•å…ƒæµ‹è¯•" />
  
  <meta property="og:description" content="ä¸€ç›´å¯¹å•æµ‹å¾ˆæ„Ÿå…´è¶£ï¼Œä½†å¯¹å•æµ‹è¦†ç›–ç‡ã€æµ‹è¯•æŠ¥å‘Šç­‰å…³é”®è¯æ‡µæ‡µæ‡‚æ‡‚ï¼Œæœ€è¿‘å‡ ä¸ªæœˆä¸€ç›´åœ¨æ‘¸ç´¢å¦‚ä½•åœ¨Vueä¸šåŠ¡ç³»ç»Ÿä¸­è½åœ°å•å…ƒæµ‹è¯•ï¼Œçœ‹åˆ°æ…¢æ…¢å¢é•¿çš„è¦†ç›–ç‡ï¼Œæ…¢æ…¢æ¸…æ™°çš„æ¨¡å—ï¼Œå¯¹å•å…ƒæµ‹è¯•çš„ç†è§£ä¹Ÿæ¯”ä»¥å‰æ›´åŠ æ·±å…¥ï¼Œä¹Ÿæœ‰ä¸€äº›å¿ƒå¾—å’Œæ”¶è·ã€‚ ä»Šå¤©æŠŠè‡ªå·±çš„ç¬”è®°åˆ†äº«å‡ºæ¥ï¼Œå’Œå¤§å®¶ä¸€èµ·äº¤æµæˆ‘åœ¨2ä¸ªè¾ƒä¸ºå¤æ‚çš„Vueä¸šåŠ¡ç³»ç»Ÿä¸­è½åœ°å•æµ‹çš„ä¸€äº›">
  
  <meta property="og:url" content="https://nihaojob.github.io/2021/07/08/vue-Jest/" />

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Vueä¸šåŠ¡ç³»ç»Ÿè½åœ°å•å…ƒæµ‹è¯•">
  
  <meta name="twitter:description" content="ä¸€ç›´å¯¹å•æµ‹å¾ˆæ„Ÿå…´è¶£ï¼Œä½†å¯¹å•æµ‹è¦†ç›–ç‡ã€æµ‹è¯•æŠ¥å‘Šç­‰å…³é”®è¯æ‡µæ‡µæ‡‚æ‡‚ï¼Œæœ€è¿‘å‡ ä¸ªæœˆä¸€ç›´åœ¨æ‘¸ç´¢å¦‚ä½•åœ¨Vueä¸šåŠ¡ç³»ç»Ÿä¸­è½åœ°å•å…ƒæµ‹è¯•ï¼Œçœ‹åˆ°æ…¢æ…¢å¢é•¿çš„è¦†ç›–ç‡ï¼Œæ…¢æ…¢æ¸…æ™°çš„æ¨¡å—ï¼Œå¯¹å•å…ƒæµ‹è¯•çš„ç†è§£ä¹Ÿæ¯”ä»¥å‰æ›´åŠ æ·±å…¥ï¼Œä¹Ÿæœ‰ä¸€äº›å¿ƒå¾—å’Œæ”¶è·ã€‚ ä»Šå¤©æŠŠè‡ªå·±çš„ç¬”è®°åˆ†äº«å‡ºæ¥ï¼Œå’Œå¤§å®¶ä¸€èµ·äº¤æµæˆ‘åœ¨2ä¸ªè¾ƒä¸ºå¤æ‚çš„Vueä¸šåŠ¡ç³»ç»Ÿä¸­è½åœ°å•æµ‹çš„ä¸€äº›">
  
  
  <meta name="twitter:image" content="https://nihaojob.github.ioundefined">
  
  <meta name="twitter:url" content="https://nihaojob.github.io/2021/07/08/vue-Jest/" />

  <!-- Mobile Specific Metas
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Preload fonts
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <link rel="preload" href="../fonts/dm-serif-display-v4-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="../fonts/inter-v2-latin-regular.woff2" as="font" type="font/woff2" crossorigin>

  <!-- CSS
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  
<link rel="stylesheet" href="/css/normalize.css">

  
<link rel="stylesheet" href="/css/skeleton.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
<link rel="stylesheet" href="/css/prism-dark.css">

  
<link rel="stylesheet" href="/css/prism-line-numbers.css">

  <!-- User css -->
  
  
<link rel="stylesheet" href="/css/user.css">

  

  <!-- Favicon
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <link rel="icon" type="image/png" href="/images/favicon.png">

  <!-- Custom Theme Color Style
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <style>
  a:not(.icon) {
    text-decoration-color: #0FA0CE;
    background-image: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0) 50%,
      #0FA0CE 50%
    );
  }
  blockquote {
    border-left: 8px solid #0FA0CE;
  }
  .nanobar .bar {
    background: #0FA0CE;
  }
  .button.button-primary:hover,
  button.button-primary:hover,
  input[type="submit"].button-primary:hover,
  input[type="reset"].button-primary:hover,
  input[type="button"].button-primary:hover,
  .button.button-primary:focus,
  button.button-primary:focus,
  input[type="submit"].button-primary:focus,
  input[type="reset"].button-primary:focus,
  input[type="button"].button-primary:focus {
    background-color: #0FA0CE;
    border-color: #0FA0CE;
  }
  input[type="email"]:focus,
  input[type="number"]:focus,
  input[type="search"]:focus,
  input[type="text"]:focus,
  input[type="tel"]:focus,
  input[type="url"]:focus,
  input[type="password"]:focus,
  textarea:focus,
  select:focus {
    border: 1px solid #0FA0CE;
  }
</style>

  <!-- Google Analytics (With Privacy Settings On)
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  

<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="ç§¦å°‘å«çš„åšå®¢" type="application/atom+xml">
</head>

<body>
  <div class="container">
    <div class="row">
      <div>

        <div class="row">
  <div class="two columns" style="max-width: 50px">
    <h1 class="mt-2 mode">
      <div onclick=setDarkMode(true) id="darkBtn">ğŸŒ‘</div>
      <div onclick=setDarkMode(false) id="lightBtn" class=hidden>â˜€ï¸</div>
      <script >
        if (localStorage.getItem('preferredTheme') == 'dark') {
          setDarkMode(true)
        }
        function setDarkMode(isDark) {
          var darkBtn = document.getElementById('darkBtn')
          var lightBtn = document.getElementById('lightBtn')
          if (isDark) {
            lightBtn.style.display = "block"
            darkBtn.style.display = "none"
            localStorage.setItem('preferredTheme', 'dark');
          } else {
            lightBtn.style.display = "none"
            darkBtn.style.display = "block"
            localStorage.removeItem('preferredTheme');
          }
          document.body.classList.toggle("darkmode");
        }
      </script>
    </h1>
  </div>

  <div class="six columns ml-1">
    <h1 class="mt-2">
      ç§¦å°‘å«çš„åšå®¢
    </h1>
  </div>

  <div class="twelve columns">
    <div class="row">
      <div class="nine columns left">
        <a href="/">ä¸»é¡µ</a>
        
          
          <a href="/archives" class="ml">å½’æ¡£</a>
          
        
          
          <a href="/About" class="ml">å…³äº</a>
          
        
          
          <a href="/atom.xml" class="ml">RSS</a>
          
        
          
          <a target="_blank" rel="noopener" href="https://juejin.cn/user/3843548383549214" class="ml">æ˜é‡‘</a>
          
        
        
      </div>
    </div>
    <hr style="margin-bottom: 2.6rem">
  </div>
</div>

        <div class="trans">
            <h2>Vueä¸šåŠ¡ç³»ç»Ÿè½åœ°å•å…ƒæµ‹è¯•</h2>

  <p>ä¸€ç›´å¯¹å•æµ‹å¾ˆæ„Ÿå…´è¶£ï¼Œä½†å¯¹å•æµ‹è¦†ç›–ç‡ã€æµ‹è¯•æŠ¥å‘Šç­‰å…³é”®è¯æ‡µæ‡µæ‡‚æ‡‚ï¼Œæœ€è¿‘å‡ ä¸ªæœˆä¸€ç›´åœ¨æ‘¸ç´¢å¦‚ä½•åœ¨Vueä¸šåŠ¡ç³»ç»Ÿä¸­è½åœ°å•å…ƒæµ‹è¯•ï¼Œçœ‹åˆ°æ…¢æ…¢å¢é•¿çš„è¦†ç›–ç‡ï¼Œæ…¢æ…¢æ¸…æ™°çš„æ¨¡å—ï¼Œå¯¹å•å…ƒæµ‹è¯•çš„ç†è§£ä¹Ÿæ¯”ä»¥å‰æ›´åŠ æ·±å…¥ï¼Œä¹Ÿæœ‰ä¸€äº›å¿ƒå¾—å’Œæ”¶è·ã€‚</p>
<p>ä»Šå¤©æŠŠè‡ªå·±çš„ç¬”è®°åˆ†äº«å‡ºæ¥ï¼Œå’Œå¤§å®¶ä¸€èµ·äº¤æµæˆ‘åœ¨2ä¸ªè¾ƒä¸ºå¤æ‚çš„Vueä¸šåŠ¡ç³»ç»Ÿä¸­è½åœ°å•æµ‹çš„ä¸€äº›æ€è·¯å’Œæ–¹æ³•ï¼Œç®—æ˜¯å…¥é—¨å®è·µç±»çš„ç¬”è®°ï¼Œèµ„æ·±å¤§ä½¬è¿˜è¯·è·³è¿‡ã€‚</p>
<h2 id="å¤§çº²"><a href="#å¤§çº²" class="headerlink" title="å¤§çº²"></a>å¤§çº²</h2><ol>
<li>å®šä¹‰</li>
<li><strong>å®‰è£…ä¸ä½¿ç”¨</strong></li>
<li><strong>å¸¸ç”¨API</strong></li>
<li><strong>è½åœ°å•å…ƒæµ‹è¯•</strong></li>
<li><strong>æ¼”è¿›ï¼šæ„å»ºå¯æµ‹è¯•çš„å•å…ƒæ¨¡å—</strong></li>
<li><strong>å¯ç»´æŠ¤çš„å•å…ƒæ¨¡å—</strong></li>
<li>å›é¡¾</li>
<li>è®¨è®º &amp;&amp; Thank</li>
</ol>
<h2 id="1-å®šä¹‰"><a href="#1-å®šä¹‰" class="headerlink" title="1. å®šä¹‰"></a>1. å®šä¹‰</h2><p><strong>å•å…ƒæµ‹è¯•å®šä¹‰ï¼š</strong></p>
<p>å•å…ƒæµ‹è¯•æ˜¯æŒ‡å¯¹è½¯ä»¶ä¸­çš„<strong>æœ€å°å¯æµ‹è¯•å•å…ƒè¿›è¡Œæ£€æŸ¥å’ŒéªŒè¯</strong>ã€‚å•å…ƒåœ¨è´¨é‡ä¿è¯ä¸­æ˜¯éå¸¸é‡è¦çš„ç¯èŠ‚ï¼Œæ ¹æ®æµ‹è¯•é‡‘å­—å¡”åŸç†ï¼Œè¶Šå¾€ä¸Šå±‚çš„æµ‹è¯•ï¼Œæ‰€éœ€çš„æµ‹è¯•æŠ•å…¥æ¯”ä¾‹è¶Šå¤§ï¼Œæ•ˆæœä¹Ÿè¶Šå·®ï¼Œè€Œå•å…ƒæµ‹è¯•çš„æˆæœ¬è¦å°çš„å¤šï¼Œä¹Ÿæ›´å®¹æ˜“å‘ç°é—®é¢˜ã€‚</p>
<p>ä¹Ÿæœ‰ä¸åŒçš„æµ‹è¯•åˆ†å±‚ç­–ç•¥ï¼ˆå†°æ·‡æ·‹æ¨¡å‹ã€å† å†›æ¨¡å‹ï¼‰ã€‚</p>
<p><strong><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c916b65f711945a19d6f61ecdc386882~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"></strong></p>
<h2 id="2-å®‰è£…ä¸ä½¿ç”¨"><a href="#2-å®‰è£…ä¸ä½¿ç”¨" class="headerlink" title="2. å®‰è£…ä¸ä½¿ç”¨"></a>2. å®‰è£…ä¸ä½¿ç”¨</h2><h4 id="1-vueé¡¹ç›®æ·»åŠ -vue-unit-jest-æ–‡æ¡£"><a href="#1-vueé¡¹ç›®æ·»åŠ -vue-unit-jest-æ–‡æ¡£" class="headerlink" title="1. vueé¡¹ç›®æ·»åŠ  @vue/unit-jest æ–‡æ¡£"></a>1. vueé¡¹ç›®æ·»åŠ  @vue/unit-jest <a target="_blank" rel="noopener" href="https://vue-test-utils.vuejs.org/zh/guides/#%E5%AE%89%E8%A3%85">æ–‡æ¡£</a></h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ vue <span class="token function">add</span> @vue/unit-jest<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>å®‰è£…å®Œæˆåï¼Œåœ¨package.jsonä¸­ä¼šå¤šå‡ºtest:unitè„šæœ¬é€‰é¡¹ï¼Œå¹¶ç”Ÿæˆjest.config.jsæ–‡ä»¶ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// package.json</span>
<span class="token punctuation">&#123;</span>
  <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"avatar"</span><span class="token punctuation">,</span>
  <span class="token string">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token string">"test:unit"</span><span class="token operator">:</span> <span class="token string">"vue-cli-service test:unit"</span><span class="token punctuation">,</span> <span class="token comment">// æ–°å¢çš„è„šæœ¬</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token string">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token string">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p>ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šçš„è„šæœ¬ï¼šå¢åŠ â€“coverageè‡ªå®šä¹‰å‚æ•°</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// package.json</span>
<span class="token punctuation">&#123;</span>
  <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"avatar"</span><span class="token punctuation">,</span>
  <span class="token string">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token string">"test:unit"</span><span class="token operator">:</span> <span class="token string">"vue-cli-service test:unit"</span><span class="token punctuation">,</span>
    <span class="token string">"test:unitc"</span><span class="token operator">:</span> <span class="token string">"vue-cli-service test:unit  --coverage"</span><span class="token punctuation">,</span> <span class="token comment">// æµ‹è¯•å¹¶ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token string">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token string">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="2-VScode-vscode-jest-runner-æ’ä»¶é…ç½®"><a href="#2-VScode-vscode-jest-runner-æ’ä»¶é…ç½®" class="headerlink" title="2. VScode vscode-jest-runner æ’ä»¶é…ç½®"></a>2. VScode vscode-jest-runner æ’ä»¶é…ç½®</h4><p>ä½œç”¨ï¼šVS Codeæ‰“å¼€æµ‹è¯•æ–‡ä»¶åï¼Œå¯ç›´æ¥è¿è¡Œç”¨ä¾‹ã€‚<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4df9e177d49140d3833c73235b1ff00a~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"><br>è¿è¡Œæ•ˆæœï¼š<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2617ab4e4ba24c6c825ae557e0ef8284~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"><br>ä¸é€šè¿‡æ•ˆæœï¼š<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7adf5ee537f342948bf8e1429b8ccf5e~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"></p>
<p>å®‰è£…æ’ä»¶ï¼š<a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=firsttris.vscode-jest-runner">https://marketplace.visualstudio.com/items?itemName=firsttris.vscode-jest-runner</a><br>é…ç½®é¡¹ï¼šè®¾ç½® =&gt; jest-Runner Config</p>
<ul>
<li>Code Lens Selectorï¼šåŒ¹é…çš„æ–‡ä»¶ï¼Œ**/*.{test,spec}.{js,jsx,ts,tsx}</li>
<li>Jest Commandï¼šå®šä¹‰Jestå‘½ä»¤ï¼Œé»˜è®¤ä¸ºJest å…¨å±€å‘½ä»¤ã€‚</li>
</ul>
<p>å°†Jest Commandæ›¿æ¢ä¸º test:unitï¼Œä½¿ç”¨vueè„šæ‰‹æ¶æä¾›çš„ test:unit è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/326c34d8ec3a45e09ed532267c395892~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"></p>
<h4 id="3-githook-é…ç½®"><a href="#3-githook-é…ç½®" class="headerlink" title="3. githook é…ç½®"></a>3. githook é…ç½®</h4><p>ä½œç”¨ï¼šåœ¨æäº¤æ—¶æ‰§è¡Œæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ï¼Œæœ‰æµ‹è¯•ç”¨ä¾‹ä¸é€šè¿‡æˆ–è¦†ç›–ç‡ä¸è¾¾æ ‡æ—¶å–æ¶ˆæäº¤ã€‚<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/571482fd44e6457694730be6fe93ccb6~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"><br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8063d92f2b9244cf9e57306460369803~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"></p>
<p>å®‰è£…ï¼š</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> husky --save-dev<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>é…ç½®ï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// package.json</span>
<span class="token punctuation">&#123;</span>
  <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"avatar"</span><span class="token punctuation">,</span>
  <span class="token string">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token string">"test:unit"</span><span class="token operator">:</span> <span class="token string">"vue-cli-service test:unit"</span><span class="token punctuation">,</span>
    <span class="token string">"test:unitc"</span><span class="token operator">:</span> <span class="token string">"vue-cli-service test:unit  --coverage"</span><span class="token punctuation">,</span> <span class="token comment">// æµ‹è¯•å¹¶ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token string">"husky"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token string">"hooks"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token string">"pre-commit"</span><span class="token operator">:</span> <span class="token string">"npm run test:unitc"</span> <span class="token comment">// commitæ—¶æ‰§è¡Œå‚å•å…ƒæµ‹è¯• å¹¶ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>è®¾ç½®ç‰µå¼•æŒ‡æ ‡ï¼šjest.config.jsï¼Œå¯å…¨å±€è®¾ç½®ã€å¯¹æ–‡ä»¶å¤¹è®¾ç½®ã€å¯¹å•ä¸ªæ–‡ä»¶è®¾ç½®ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  preset<span class="token operator">:</span> <span class="token string">'@vue/cli-plugin-unit-jest'</span><span class="token punctuation">,</span>
  timers<span class="token operator">:</span> <span class="token string">'fake'</span><span class="token punctuation">,</span>
  coverageThreshold<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
   global<span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token comment">// å…¨å±€</span>
      branches<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      functions<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      lines<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      statements<span class="token operator">:</span> <span class="token number">10</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token string">'./src/common/**/*.js'</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token comment">// æ–‡ä»¶å¤¹</span>
      branches<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      statements<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token string">'./src/common/agoraClientUtils.js'</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token comment">// å•ä¸ªæ–‡ä»¶</span>
      branches<span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
      functions<span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
      lines<span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
      statements<span class="token operator">:</span> <span class="token number">80</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>




<h4 id="4-æµ‹è¯•æŠ¥å‘Š"><a href="#4-æµ‹è¯•æŠ¥å‘Š" class="headerlink" title="4. æµ‹è¯•æŠ¥å‘Š"></a>4. æµ‹è¯•æŠ¥å‘Š</h4><p>ç”Ÿæˆçš„æµ‹è¯•æŠ¥å‘Šåœ¨è·Ÿç›®å½•ä¸‹çš„<code>coverage</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œä¸»è¦æ˜¯4ä¸ªæŒ‡æ ‡ã€‚</p>
<blockquote>
<ul>
<li>è¯­å¥è¦†ç›–ç‡ï¼ˆstatement coverageï¼‰æ¯ä¸ªè¯­å¥æ˜¯å¦éƒ½æ‰§è¡Œ</li>
<li>åˆ†æ”¯è¦†ç›–ç‡ï¼ˆbranch coverageï¼‰æ¯ä¸ªifä»£ç å—æ˜¯å¦éƒ½æ‰§è¡Œ</li>
<li>å‡½æ•°è¦†ç›–ç‡ï¼ˆfunction coverageï¼‰æ¯ä¸ªå‡½æ•°æ˜¯å¦éƒ½è°ƒç”¨</li>
<li>è¡Œè¦†ç›–ç‡ï¼ˆline coverage) æ¯ä¸€è¡Œæ˜¯å¦éƒ½æ‰§è¡Œäº†</li>
</ul>
</blockquote>
<p>æ ¹ç›®å½•æˆªå›¾<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ad0e6c648ab14d048149a6eb149e606b~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"><br>æ–‡ä»¶å¤¹ç›®å½•æˆªå›¾ï¼šä¸‰ç§é¢œè‰²ä»£è¡¨ä¸‰ç§çŠ¶æ€ï¼šçº¢è‰²ã€é»„è‰²ã€ç»¿è‰²ã€‚<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7d4d1d67eec04889820a6a0736debe3e~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"><br>å•ä¸ªæ–‡ä»¶æˆªå›¾ï¼šçº¢è‰²è¡Œä¸ºæœªè¦†ç›–ï¼Œç»¿è‰²è¡Œä¸ºè¿è¡Œæ¬¡æ•°ã€‚<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7a4abfd2c214484e8ee7dcd24b64dcd5~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"></p>
<h2 id="3-å¸¸ç”¨API"><a href="#3-å¸¸ç”¨API" class="headerlink" title="3. å¸¸ç”¨API"></a>3. å¸¸ç”¨API</h2><p>æŠ›ç –å¼•ç‰ï¼Œåªå±•ç¤ºç®€å•çš„ç”¨æ³•ï¼Œå…·ä½“å¯å‚è§æ–‡æ¡£ã€‚</p>
<p><strong>Jestå¸¸ç”¨æ–¹æ³•ï¼š</strong><br><a target="_blank" rel="noopener" href="https://jestjs.io/zh-Hans/">æ–‡æ¡£</a></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// ä¾‹å­</span>
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'versionToNum ç‰ˆæœ¬å·è½¬æ•°å­—'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'10.2.3 => 10.2'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">versionToNum</span><span class="token punctuation">(</span><span class="token string">'10.2.3'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">10.2</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'11.2.3 => 11.2'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">versionToNum</span><span class="token punctuation">(</span><span class="token string">'11.2.3'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">11.2</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

<span class="token comment">/*------------------------------------------------*/</span>

<span class="token comment">// å€¼å¯¹æ¯”</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token function">expect</span><span class="token punctuation">(</span>operationServe<span class="token punctuation">.</span>operationPower<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token comment">// å¯¹è±¡å¯¹æ¯”</span>
<span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>one<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> two<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// JSON å¯¹æ¯”</span>
<span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toStrictEqual</span><span class="token punctuation">(</span>afterJson<span class="token punctuation">)</span>


<span class="token comment">// æ¯æ¬¡æ‰§è¡Œå‰</span>
<span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
	<span class="token comment">// do  some thing....</span>
  <span class="token comment">// DOM è®¾ç½®</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div id="pc" class="live-umcamera-video" style="position: relative;">
        &lt;div style="width:200px; height:300px; position:absolute; top:20px; left:500px;">
            &lt;video style="width:300px; height:400px;"
                autoplay="" muted="" playsinline="">&lt;/video>
        &lt;/div>
    &lt;/div></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

<span class="token comment">// Mock</span>
<span class="token keyword">const</span> getCondition <span class="token operator">=</span>  jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mockImplementation</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> ret<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> content<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> parameterName<span class="token operator">:</span> <span class="token string">'hulala'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// Promise æ–¹æ³•</span>
<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'è·å–é¢„ç½®åŸ‹ç‚¹ - pages'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token function">getCondition</span><span class="token punctuation">(</span><span class="token string">'hz'</span><span class="token punctuation">,</span> <span class="token string">'pages'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// logTypeä¸åŒ…å«presetEventã€ä¸ç­‰äº pagesï¼Œè·å–é¢„ç½®åŸ‹ç‚¹</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>$api<span class="token punctuation">.</span>analysis<span class="token punctuation">.</span>findPresetList<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

<span class="token comment">// å®šæ—¶å™¨æ–¹æ³•  </span>
<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'å®šæ—¶å™¨ æ–°å»º æ‰§è¡Œ'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> timer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntervalStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> callback <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  timer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">'oneset'</span><span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toBeCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  jest<span class="token punctuation">.</span><span class="token function">runTimersToTime</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span> <span class="token comment">// ç­‰å¾…2ç§’</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><strong>@vue/test-utilså¸¸ç”¨æ–¹æ³•ï¼š</strong><br><a target="_blank" rel="noopener" href="https://vue-test-utils.vuejs.org/zh/">æ–‡æ¡£</a></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// ä¾‹å­</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> mount <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'@vue/test-utils'</span>
<span class="token keyword">import</span> Counter <span class="token keyword">from</span> <span class="token string">'./counter'</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Counter'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// ç°åœ¨æŒ‚è½½ç»„ä»¶ï¼Œä½ ä¾¿å¾—åˆ°äº†è¿™ä¸ªåŒ…è£¹å™¨</span>
  <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">mount</span><span class="token punctuation">(</span>Counter<span class="token punctuation">)</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'renders the correct markup'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContain</span><span class="token punctuation">(</span><span class="token string">'&lt;span class="count">0&lt;/span>'</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

  <span class="token comment">// ä¹Ÿä¾¿äºæ£€æŸ¥å·²å­˜åœ¨çš„å…ƒç´ </span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'has a button'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

<span class="token comment">/*------------------------------------------------*/</span>


<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> shallowMount<span class="token punctuation">,</span> mount<span class="token punctuation">,</span> render<span class="token punctuation">,</span> renderToString<span class="token punctuation">,</span> createLocalVue <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'@vue/test-utils'</span>
<span class="token keyword">import</span> Component <span class="token keyword">from</span> <span class="token string">'../HelloWorld.vue'</span>

<span class="token comment">// routeræ¨¡æ‹Ÿ</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">const</span> localVue <span class="token operator">=</span> <span class="token function">createLocalVue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
localVue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span>
<span class="token function">shallowMount</span><span class="token punctuation">(</span>Component<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> localVue <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

<span class="token comment">// ä¼ªé€ </span>
<span class="token keyword">const</span> $route <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  path<span class="token operator">:</span> <span class="token string">'/some/path'</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">shallowMount</span><span class="token punctuation">(</span>Component<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  mocks<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    $route
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>


<span class="token comment">// store æ¨¡æ‹Ÿ</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      state<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      actions
 <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token function">shallowMount</span><span class="token punctuation">(</span>Component<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> localVue<span class="token punctuation">,</span> store <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>


<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'é”™è¯¯ä¿¡æ¯å±•ç¤º'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// shallowMount  å…¥å‚æ¨¡æ‹Ÿ</span>
    <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">shallowMount</span><span class="token punctuation">(</span>cloudPhone<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
      propsData<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        mosaicStatus<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        customerOnLine<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        cloudPhoneState<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        cloudPhoneError<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        cloudPhoneTip<span class="token operator">:</span> <span class="token string">'å‘ç”Ÿé”™è¯¯'</span><span class="token punctuation">,</span>
        delay<span class="token operator">:</span> <span class="token string">''</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    
    
    <span class="token comment">// å­ç»„ä»¶æ˜¯å¦å±•ç¤º</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>Tip<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token comment">// htmlåˆ¤æ–­</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'å‘ç”Ÿé”™è¯¯'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token comment">// DOM å…ƒç´ åˆ¤æ–­</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.mosaicStatus'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
   	<span class="token comment">// æ‰§è¡Œç‚¹å‡»äº‹ä»¶</span>
    <span class="token keyword">await</span> wrapper<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">)</span>
  	<span class="token comment">// class</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">classes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContain</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">classes</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
		<span class="token comment">// å­ç»„ä»¶æŸ¥æ‰¾  	</span>
  	wrapper<span class="token punctuation">.</span><span class="token function">findComponent</span><span class="token punctuation">(</span>Bar<span class="token punctuation">)</span>
    <span class="token comment">// é”€æ¯</span>
   	wrapper<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// </span>
   	wrapper<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  	
  	<span class="token comment">// axiosæ¨¡æ‹Ÿ</span>
   	jest<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">'axios'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      get<span class="token operator">:</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="4-è½åœ°å•å…ƒæµ‹è¯•"><a href="#4-è½åœ°å•å…ƒæµ‹è¯•" class="headerlink" title="4. è½åœ°å•å…ƒæµ‹è¯•"></a>4. è½åœ°å•å…ƒæµ‹è¯•</h2><p>âŒ ç›´æ¥å¯¹ä¸€ä¸ªè¾ƒå¤§çš„ä¸šåŠ¡ç»„ä»¶æ·»åŠ å•å…ƒæµ‹è¯•ï¼Œéœ€è¦æ¨¡æ‹Ÿä¸€ç³»åˆ—çš„å…¨å±€å‡½æ•°ï¼Œæ— æ³•ç›´æ¥è¿è¡Œã€‚</p>
<p><strong>é—®é¢˜ï¼š</strong></p>
<ol>
<li>é€»è¾‘å¤šï¼šä¸šåŠ¡é€»è¾‘ä¸æ¸…æ¥šï¼Œ1000+ è¡Œ</li>
<li>ä¾èµ–å¤šï¼š<code>$dayjsã€$apiã€$validateã€$routeã€$echartsã€mixinsã€$store</code>â€¦</li>
<li>è·¯å¾„ä¸ä¸€è‡´ï¼šæœ‰<code>@</code>ã€<code>./</code>ã€<code>../</code></li>
</ol>
<blockquote>
<p>å•å…ƒæµ‹è¯•æ˜¯ç”¨æ¥å¯¹ä¸€ä¸ªæ¨¡å—ã€ä¸€ä¸ªå‡½æ•°æˆ–è€…ä¸€ä¸ªç±»æ¥è¿›è¡Œæ­£ç¡®æ€§æ£€éªŒçš„æµ‹è¯•å·¥ä½œã€‚<br>â€“ å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™</p>
</blockquote>
<p><strong>è½åœ°ï¼š</strong></p>
<p>âœ… å¯¹ä¸šåŠ¡é€»è¾‘å…³é”®ç‚¹ï¼Œ<strong>æŠ½å‡ºçº¯å‡½æ•°ã€ç±»æ–¹æ³•ã€ç»„ä»¶ï¼Œå¹¶å•ç‹¬å¢åŠ æµ‹è¯•ä»£ç </strong>ã€‚</p>
<p><strong>ä¾‹å­ï¼š</strong><br>è·å–åˆ†ç»„å‚æ•°ï¼Œç”±7ä¸ªæ¥å£èšåˆã€‚</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/59831dcee1794629955d3d5a0ad2618f~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b06a2326738f40d1ab942eb6540e84d4~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2b45f82ac9d542788aa3b2126d1252d8~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p>åŸæœ‰é€»è¾‘ï¼š<br>ç³»ç»Ÿå‚æ•°å­˜å…¨å±€å˜é‡ï¼Œè‡ªå®šä¹‰å‚æ•°å­˜å…¨å±€å˜é‡</p>
<ul>
<li>æ— æ³•çœ‹å‡ºå¤šå°‘ç§ç±»å‹ä¸æ¥å£æ•°é‡</li>
<li>æ— æ³•åœ¨å¤šä¸ªä½ç½®ç›´æ¥å¤ç”¨<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">getCondition</span> <span class="token punctuation">(</span><span class="token parameter">fIndex<span class="token punctuation">,</span> oneFunnel</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// æ·»åŠ é™åˆ¶æ¡ä»¶ï¼Œå¦‚æœè¯¥äº‹ä»¶æ²¡æœ‰å…ˆæ‹‰å–</span>
      <span class="token keyword">const</span> <span class="token punctuation">&#123;</span>biz<span class="token punctuation">,</span> logType<span class="token punctuation">,</span> event<span class="token punctuation">,</span> feCreateType<span class="token punctuation">&#125;</span> <span class="token operator">=</span> oneFunnel
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// ç§æœ‰é™åˆ¶æ¡ä»¶ä¸ºç©ºï¼Œä¸”ä¸æ˜¯é¢„ç½®äº‹ä»¶ æˆ– é¡µé¢ç»„ï¼Œå°±æ‹‰å–ç§æœ‰é™åˆ¶æ¡ä»¶</span>
        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>extraParamsList<span class="token punctuation">.</span>parameterList<span class="token punctuation">,</span> fIndex<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>logType <span class="token operator">!==</span> <span class="token string">'pages'</span> <span class="token operator">&amp;&amp;</span> logType<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'presetEvent'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>$api<span class="token punctuation">.</span>analysis<span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>logType<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">ParameterList</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
              biz<span class="token operator">:</span> logType <span class="token operator">===</span> <span class="token string">'server'</span> <span class="token operator">&amp;&amp;</span> feCreateType <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">''</span> <span class="token operator">:</span> biz<span class="token punctuation">,</span>
              event<span class="token operator">:</span> event<span class="token punctuation">,</span>
              terminal<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>customType<span class="token punctuation">[</span>logType<span class="token punctuation">]</span><span class="token punctuation">,</span>
              platform<span class="token operator">:</span> logType <span class="token operator">===</span> <span class="token string">'server'</span> <span class="token operator">&amp;&amp;</span> feCreateType <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">'common'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
              pageNum<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>ret <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                res<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">element</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
                  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>extraParamsList<span class="token punctuation">.</span>parameterList<span class="token punctuation">[</span>fIndex<span class="token punctuation">]</span><span class="token punctuation">,</span> element<span class="token punctuation">.</span>parameterName <span class="token operator">||</span> element<span class="token punctuation">.</span>parameter_name<span class="token punctuation">,</span> element<span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
                <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
              <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
                <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'è·å–äº‹ä»¶å±æ€§å¤±è´¥ï¼Œè¯·è”ç³»åå°ç®¡ç†å‘˜'</span><span class="token punctuation">)</span>
              <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>logType <span class="token operator">===</span> <span class="token string">'presetEvents'</span> <span class="token operator">||</span>  logType <span class="token operator">===</span> <span class="token string">'presetEventsApp'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>$api<span class="token punctuation">.</span>analysis<span class="token punctuation">.</span><span class="token function">findPresetList</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
              biz<span class="token punctuation">,</span>
              appTerminal<span class="token operator">:</span> logType<span class="token punctuation">,</span>
              operation<span class="token operator">:</span> event
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                res<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
                  item<span class="token punctuation">.</span>description <span class="token operator">=</span> item<span class="token punctuation">.</span>name
                  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>extraParamsList<span class="token punctuation">.</span>parameterList<span class="token punctuation">[</span>fIndex<span class="token punctuation">]</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>name<span class="token punctuation">,</span> item<span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
                <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
              <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'æ— éœ€æ‹‰å–'</span><span class="token punctuation">)</span>
          <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      
     <span class="token function">getGlobalCondition</span> <span class="token punctuation">(</span><span class="token parameter">funnelId</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// è·å– å…¨å±€ åŸºç¡€é€‰é¡¹</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$api<span class="token punctuation">.</span>analysis<span class="token punctuation">.</span><span class="token function">getGlobalCondition</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
          funnelId<span class="token operator">:</span> funnelId<span class="token punctuation">,</span>
          type<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>conditionMode
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">const</span> <span class="token punctuation">&#123;</span>bizList<span class="token punctuation">,</span> expressions<span class="token punctuation">,</span> expressionsNumber<span class="token punctuation">,</span> comBizList<span class="token punctuation">&#125;</span> <span class="token operator">=</span> res<span class="token punctuation">.</span>data
            <span class="token keyword">this</span><span class="token punctuation">.</span>bizList <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token operator">...</span>bizList<span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>comBizList <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token operator">...</span>comBizList<span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>comBizKeyList <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>comBizList<span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>operatorList <span class="token operator">=</span> expressions
            <span class="token keyword">this</span><span class="token punctuation">.</span>numberOperatorList <span class="token operator">=</span> expressionsNumber
            <span class="token keyword">this</span><span class="token punctuation">.</span>comBizKey <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>comBizList<span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getComBizEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'è·å–åŸºç¡€é€‰é¡¹å¤±è´¥ï¼Œè¯·è”ç³»åå°ç®¡ç†å‘˜'</span><span class="token punctuation">)</span>
            <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'è·å–åŸºç¡€é€‰é¡¹å¤±è´¥ï¼Œè¯·è”ç³»åå°ç®¡ç†å‘˜'</span><span class="token punctuation">)</span>
          <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
      
   <span class="token function">setCommonPropertiesList</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// åˆå§‹åŒ– å…¬å…±é™åˆ¶æ¡ä»¶åˆ—è¡¨ commonPropertiesList</span>
      <span class="token keyword">const</span> commonPropertiesList <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
        auto<span class="token operator">:</span> data<span class="token punctuation">.</span>h5AutoCommonProperties<span class="token punctuation">,</span>
        pages<span class="token operator">:</span> data<span class="token punctuation">.</span>h5PagesCommonProperties<span class="token punctuation">,</span>
        presetEvents<span class="token operator">:</span> data<span class="token punctuation">.</span>h5PresetCommonProperties<span class="token punctuation">,</span> <span class="token comment">// h5 é¢„ç½®äº‹ä»¶ å…¬å…±å±æ€§</span>
        customH5<span class="token operator">:</span> data<span class="token punctuation">.</span>h5CustomCommonProperties<span class="token punctuation">,</span>
        customApp<span class="token operator">:</span> data<span class="token punctuation">.</span>appCustomCommonProperties<span class="token punctuation">,</span>
        presetEventsApp<span class="token operator">:</span> data<span class="token punctuation">.</span>appPresetCommonProperties<span class="token punctuation">,</span> <span class="token comment">// App é¢„ç½®äº‹ä»¶ å…¬å…±å±æ€§</span>
        server<span class="token operator">:</span> data<span class="token punctuation">.</span>serverCommonProperties<span class="token punctuation">,</span>
        customWeapp<span class="token operator">:</span> data<span class="token punctuation">.</span>weappCustomCommonProperties<span class="token punctuation">,</span>
        presetEventsWeapp<span class="token operator">:</span> data<span class="token punctuation">.</span>weappPresetCommonProperties<span class="token punctuation">,</span> <span class="token comment">// Weapp é¢„ç½®äº‹ä»¶ å…¬å…±å±æ€§</span>
        presetEventsServer<span class="token operator">:</span> data<span class="token punctuation">.</span>serverPresetCommonProperties <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// Server é¢„ç½®äº‹ä»¶ å…¬å…±å±æ€§</span>
        presetEventsAd<span class="token operator">:</span> data<span class="token punctuation">.</span>adPresetCommonProperties
      <span class="token punctuation">&#125;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> type <span class="token keyword">in</span> commonPropertiesList<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// å°†parameter_nameçš„å€¼ä½œä¸ºkeyï¼Œitemä½œä¸ºvalueï¼Œç»„åˆä¸ºk-vå½¢å¼</span>
        <span class="token keyword">let</span> properties <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>commonPropertiesList<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span>
        commonPropertiesList<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
          properties<span class="token punctuation">[</span>item<span class="token punctuation">.</span>parameter_name<span class="token punctuation">]</span> <span class="token operator">=</span> item
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        commonPropertiesList<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> properties
      <span class="token punctuation">&#125;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>commonPropertiesList <span class="token operator">=</span> commonPropertiesList
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
æ‹†åˆ†æ¨¡å—åï¼š<br>å»ºç«‹GetParamsServerä¸»ç±»ï¼Œè¯¥ç±»ç”±2ä¸ªå­ç±»æ„æˆï¼Œå¹¶èšåˆå­ç±»æ¥å£ã€‚<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/754d1c384cf841c69b5a558c87341f6a~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"></li>
</ul>
<p>è¿™æ˜¯å…¶ä¸­ä¸€ä¸ªå­ç±»ï¼Œè·å–ç§æœ‰å‚æ•°çš„å•å…ƒæµ‹è¯•ï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> GetParamsServer<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> GetPrivateParamsServer <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'@/views/analysis/components/getParamsServer.js'</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'GetPrivateParamsServer ç§æœ‰å‚æ•°è·å–'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">let</span> $api
    <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      $api <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
        analysis<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          findPresetList<span class="token operator">:</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mockImplementation</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            code<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'hulala'</span><span class="token punctuation">,</span> description<span class="token operator">:</span> <span class="token string">'234234'</span><span class="token punctuation">,</span> data_type<span class="token operator">:</span> <span class="token string">'event'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// é¢„ç½®åŸ‹ç‚¹</span>
          serverParameterList<span class="token operator">:</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mockImplementation</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            ret<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> content<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> parameterName<span class="token operator">:</span> <span class="token string">'hulala'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// æœåŠ¡ç«¯åŸ‹ç‚¹</span>
          autoParameterList<span class="token operator">:</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mockImplementation</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            ret<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> content<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> parameter_name<span class="token operator">:</span> <span class="token string">'hulala'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// H5å…¨åŸ‹ç‚¹</span>
          customH5ParameterList<span class="token operator">:</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mockImplementation</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            ret<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> content<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> parameterName<span class="token operator">:</span> <span class="token string">'hulala'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// H5è‡ªå®šä¹‰</span>
          customWeappParameterList<span class="token operator">:</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mockImplementation</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            ret<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> content<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> parameter_name<span class="token operator">:</span> <span class="token string">'hulala'</span><span class="token punctuation">,</span> description<span class="token operator">:</span> <span class="token string">'234234'</span><span class="token punctuation">,</span> data_type<span class="token operator">:</span> <span class="token string">'event'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// Weappè‡ªå®šä¹‰</span>
          customAppParameterList<span class="token operator">:</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mockImplementation</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            ret<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> content<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> parameterName<span class="token operator">:</span> <span class="token string">'hulala'</span><span class="token punctuation">,</span> description<span class="token operator">:</span> <span class="token string">'asdfafd'</span><span class="token punctuation">,</span> data_type<span class="token operator">:</span> <span class="token string">'event'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Appè‡ªå®šä¹‰</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'GetPrivateParamsServer ä¸åŒç±»å‹è·å–'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'è·å–é¢„ç½®åŸ‹ç‚¹ - pages'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">const</span> paramsServer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetPrivateParamsServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      paramsServer<span class="token punctuation">.</span><span class="token function">initApi</span><span class="token punctuation">(</span>$api<span class="token punctuation">)</span>
      <span class="token keyword">return</span> paramsServer<span class="token punctuation">.</span><span class="token function">getCondition</span><span class="token punctuation">(</span><span class="token string">'hz'</span><span class="token punctuation">,</span> <span class="token string">'pages'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// logTypeä¸åŒ…å«presetEventã€ä¸ç­‰äº pagesï¼Œè·å–é¢„ç½®åŸ‹ç‚¹</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>$api<span class="token punctuation">.</span>analysis<span class="token punctuation">.</span>findPresetList<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'è·å–é¢„ç½®åŸ‹ç‚¹ - presetEvent '</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">const</span> paramsServer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetPrivateParamsServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      paramsServer<span class="token punctuation">.</span><span class="token function">initApi</span><span class="token punctuation">(</span>$api<span class="token punctuation">)</span>
      <span class="token keyword">return</span> paramsServer<span class="token punctuation">.</span><span class="token function">getCondition</span><span class="token punctuation">(</span><span class="token string">'hz'</span><span class="token punctuation">,</span> <span class="token string">'presetEvent'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// logTypeä¸åŒ…å«presetEventã€ä¸ç­‰äº pagesï¼Œè·å–é¢„ç½®åŸ‹ç‚¹</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>$api<span class="token punctuation">.</span>analysis<span class="token punctuation">.</span>findPresetList<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'è·å–éé¢„ç½®åŸ‹ç‚¹ - å…¶ä»–'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">const</span> paramsServer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetPrivateParamsServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      paramsServer<span class="token punctuation">.</span><span class="token function">initApi</span><span class="token punctuation">(</span>$api<span class="token punctuation">)</span>
      <span class="token keyword">return</span> paramsServer<span class="token punctuation">.</span><span class="token function">getCondition</span><span class="token punctuation">(</span><span class="token string">'hz'</span><span class="token punctuation">,</span> <span class="token string">'12312'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>$api<span class="token punctuation">.</span>analysis<span class="token punctuation">.</span>findPresetList<span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toBeCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    

    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'è·å–éé¢„ç½®åŸ‹ç‚¹ - server'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">const</span> paramsServer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetPrivateParamsServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      paramsServer<span class="token punctuation">.</span><span class="token function">initApi</span><span class="token punctuation">(</span>$api<span class="token punctuation">)</span>
      <span class="token keyword">return</span> paramsServer<span class="token punctuation">.</span><span class="token function">getCondition</span><span class="token punctuation">(</span><span class="token string">'hz'</span><span class="token punctuation">,</span> <span class="token string">'server'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>$api<span class="token punctuation">.</span>analysis<span class="token punctuation">.</span>serverParameterList<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'è·å–éé¢„ç½®åŸ‹ç‚¹ - auto'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">const</span> paramsServer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetPrivateParamsServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      paramsServer<span class="token punctuation">.</span><span class="token function">initApi</span><span class="token punctuation">(</span>$api<span class="token punctuation">)</span>
      <span class="token keyword">return</span> paramsServer<span class="token punctuation">.</span><span class="token function">getCondition</span><span class="token punctuation">(</span><span class="token string">'hz'</span><span class="token punctuation">,</span> <span class="token string">'auto'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>$api<span class="token punctuation">.</span>analysis<span class="token punctuation">.</span>autoParameterList<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'è·å–éé¢„ç½®åŸ‹ç‚¹ - customH5'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">const</span> paramsServer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetPrivateParamsServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      paramsServer<span class="token punctuation">.</span><span class="token function">initApi</span><span class="token punctuation">(</span>$api<span class="token punctuation">)</span>
      <span class="token keyword">return</span> paramsServer<span class="token punctuation">.</span><span class="token function">getCondition</span><span class="token punctuation">(</span><span class="token string">'hz'</span><span class="token punctuation">,</span> <span class="token string">'customH5'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>$api<span class="token punctuation">.</span>analysis<span class="token punctuation">.</span>customH5ParameterList<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'è·å–éé¢„ç½®åŸ‹ç‚¹ - customWeapp'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">const</span> paramsServer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetPrivateParamsServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      paramsServer<span class="token punctuation">.</span><span class="token function">initApi</span><span class="token punctuation">(</span>$api<span class="token punctuation">)</span>
      <span class="token keyword">return</span> paramsServer<span class="token punctuation">.</span><span class="token function">getCondition</span><span class="token punctuation">(</span><span class="token string">'hz'</span><span class="token punctuation">,</span> <span class="token string">'customWeapp'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>$api<span class="token punctuation">.</span>analysis<span class="token punctuation">.</span>customWeappParameterList<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'è·å–éé¢„ç½®åŸ‹ç‚¹ - customApp'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">const</span> paramsServer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetPrivateParamsServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      paramsServer<span class="token punctuation">.</span><span class="token function">initApi</span><span class="token punctuation">(</span>$api<span class="token punctuation">)</span>
      <span class="token keyword">return</span> paramsServer<span class="token punctuation">.</span><span class="token function">getCondition</span><span class="token punctuation">(</span><span class="token string">'hz'</span><span class="token punctuation">,</span> <span class="token string">'customApp'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>$api<span class="token punctuation">.</span>analysis<span class="token punctuation">.</span>customAppParameterList<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'è·å–éé¢„ç½®åŸ‹ç‚¹ - ä¸å­˜åœ¨ç±»å‹'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">const</span> paramsServer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetPrivateParamsServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      paramsServer<span class="token punctuation">.</span><span class="token function">initApi</span><span class="token punctuation">(</span>$api<span class="token punctuation">)</span>
      <span class="token keyword">return</span> paramsServer<span class="token punctuation">.</span><span class="token function">getCondition</span><span class="token punctuation">(</span><span class="token string">'hz'</span><span class="token punctuation">,</span> <span class="token string">'å“ˆå“ˆå“ˆå“ˆ'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>


  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'GetPrivateParamsServer ç»“æœè½¬æ¢ä¸ºlabel'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'è·å–é¢„ç½®åŸ‹ç‚¹ - pages'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">const</span> paramsServer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetPrivateParamsServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      paramsServer<span class="token punctuation">.</span><span class="token function">initApi</span><span class="token punctuation">(</span>$api<span class="token punctuation">)</span>
      <span class="token keyword">return</span> paramsServer<span class="token punctuation">.</span><span class="token function">getConditionLabel</span><span class="token punctuation">(</span><span class="token string">'hz'</span><span class="token punctuation">,</span> <span class="token string">'pages'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token function">expect</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span>res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">expect</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span>res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>label<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>types<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">'custom'</span><span class="token punctuation">)</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>dataType<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">'event'</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'è·å–éé¢„ç½®åŸ‹ç‚¹ - customWeapp'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">const</span> paramsServer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetPrivateParamsServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      paramsServer<span class="token punctuation">.</span><span class="token function">initApi</span><span class="token punctuation">(</span>$api<span class="token punctuation">)</span>
      <span class="token keyword">return</span> paramsServer<span class="token punctuation">.</span><span class="token function">getConditionLabel</span><span class="token punctuation">(</span><span class="token string">'hz'</span><span class="token punctuation">,</span> <span class="token string">'customWeapp'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token function">expect</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span>res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">expect</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span>res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>label<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>types<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">'custom'</span><span class="token punctuation">)</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>dataType<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">'event'</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'è·å–éé¢„ç½®åŸ‹ç‚¹ - customApp'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">const</span> paramsServer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetPrivateParamsServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      paramsServer<span class="token punctuation">.</span><span class="token function">initApi</span><span class="token punctuation">(</span>$api<span class="token punctuation">)</span>
      <span class="token keyword">return</span> paramsServer<span class="token punctuation">.</span><span class="token function">getConditionLabel</span><span class="token punctuation">(</span><span class="token string">'hz'</span><span class="token punctuation">,</span> <span class="token string">'customApp'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token function">expect</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span>res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">expect</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span>res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>label<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>types<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">'custom'</span><span class="token punctuation">)</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>dataType<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">'event'</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/415670ec89c54c75b61c2f1b1200ef84~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"></p>
<p><strong>ä»æµ‹è¯•ç”¨ä¾‹çœ‹åˆ°çš„ä»£ç é€»è¾‘ï¼š</strong></p>
<ul>
<li>6ä¸ªæ¥å£</li>
<li>6ç§äº‹ä»¶ç±»å‹</li>
<li>ç±»å‹ä¸æ¥å£çš„å¯¹åº”å…³ç³»</li>
<li>æ¥å£æ ¼å¼æœ‰ä¸‰ç§</li>
</ul>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ol>
<li>å¤ç”¨ï¼šå°†å¤æ‚çš„ä¸šåŠ¡é€»è¾‘å°é—­åœ¨é»‘ç›’é‡Œï¼Œæ›´æ–¹ä¾¿å¤ç”¨ã€‚</li>
<li>è´¨é‡ï¼šæ¨¡å—çš„åŠŸèƒ½é€šè¿‡æµ‹è¯•ç”¨ä¾‹å¾—åˆ°ä¿éšœã€‚</li>
<li>ç»´æŠ¤ï¼šæµ‹è¯•å³æ–‡æ¡£ï¼Œæ–¹ä¾¿äº†è§£ä¸šåŠ¡é€»è¾‘ã€‚</li>
</ol>
<p>å®è·µï¼šåœ¨æ·»åŠ å•æµ‹çš„è¿‡ç¨‹ä¸­ï¼ŒæŠ½è±¡æ¨¡å—ï¼Œé‡æ„éƒ¨åˆ†åŠŸèƒ½ï¼Œå¹¶å¯¹å•ä¸€èŒè´£çš„æ¨¡å—å¢åŠ å•æµ‹ã€‚</p>
<h2 id="5-æ¼”è¿›ï¼šæ„å»ºå¯æµ‹è¯•å•å…ƒæ¨¡å—"><a href="#5-æ¼”è¿›ï¼šæ„å»ºå¯æµ‹è¯•å•å…ƒæ¨¡å—" class="headerlink" title="5. æ¼”è¿›ï¼šæ„å»ºå¯æµ‹è¯•å•å…ƒæ¨¡å—"></a>5. æ¼”è¿›ï¼šæ„å»ºå¯æµ‹è¯•å•å…ƒæ¨¡å—</h2><p>å°†ä¸šåŠ¡ä»£ç ä»£ç æ¼”å˜ä¸ºå¯æµ‹è¯•ä»£ç ï¼Œé‡ç‚¹åœ¨ï¼š</p>
<ol>
<li>è®¾è®¡ï¼šå°†ä¸šåŠ¡é€»è¾‘<strong>æ‹†åˆ†ä¸ºå•å…ƒæ¨¡å—</strong>ï¼ˆUIç»„ä»¶ã€åŠŸèƒ½æ¨¡å—ï¼‰ã€‚</li>
<li>æ—¶é—´ï¼šå¯è¡Œçš„é‡æ„ç›®æ ‡ä¸é‡æ„æ–¹æ³•ï¼Œè¦æœ‰<strong>é•¿æœŸé‡æ„</strong>çš„å¿ƒç†é¢„æœŸã€‚</li>
</ol>
<p><strong>ä¸ºå•ä¸€èŒè´£çš„æ¨¡å—è®¾è®¡æµ‹è¯•ç”¨ä¾‹ï¼Œæ‰ä¼šå¯¹åŠŸèƒ½è¦†ç›–çš„æ›´å…¨é¢ï¼Œæ‰€ä»¥è®¾è®¡è¿™ä¸€æ­¥å°¤ä¸ºé‡è¦ã€‚</strong></p>
<blockquote>
<p>å¦‚æœæŒ½æ•‘ä¸€ä¸ªç³»ç»Ÿçš„åŠæ³•æ˜¯é‡æ–°è®¾è®¡ä¸€ä¸ªæ–°çš„ç³»ç»Ÿï¼Œé‚£ä¹ˆï¼Œ<strong>æˆ‘ä»¬æœ‰ä»€ä¹ˆç†ç”±è®¤ä¸ºä»å¤´å¼€å§‹ï¼Œç»“æœä¼šæ›´å¥½å‘¢</strong>?<br>â€“ã€Šæ¶æ„æ•´æ´ä¹‹é“ã€‹</p>
</blockquote>
<p>åŸæ¥æ¨¡å—ä¹Ÿæ˜¯æœ‰è®¾è®¡ï¼Œæˆ‘ä»¬å¦‚ä½•ä¿è¯é‡æ„åçœŸçš„æ¯”ä¹‹å‰æ›´å¥½å—ï¼Ÿè¿˜æ˜¯è¦æ ¹æ®è®¾è®¡åŸåˆ™å®¢è§‚çš„æ¥åˆ¤æ–­ã€‚</p>
<p><strong>è®¾è®¡åŸåˆ™ SOLIDï¼š</strong></p>
<ul>
<li>SRP-å•ä¸€èŒè´£</li>
<li>OCP-å¼€é—­ï¼šæ˜“ä¸æ‰©å±•ï¼ŒæŠ—æ‹’ä¿®æ”¹ã€‚</li>
<li>LSP-é‡Œæ°æ›¿æ¢ï¼šå­ç±»æ¥å£ç»Ÿä¸€ï¼Œå¯ç›¸äº’æ›¿æ¢ã€‚</li>
<li>ISP-æ¥å£éš”ç¦»ï¼šä¸ä¾èµ–ä¸éœ€è¦çš„ä¸œè¥¿ã€‚</li>
<li>DIP-ä¾èµ–åè½¬ï¼šæ„å»ºç¨³å®šçš„æŠ½è±¡å±‚ï¼Œå•å‘ä¾èµ–ï¼ˆä¾‹ï¼šA =&gt; B =&gt; Cï¼Œ åä¾‹ï¼šA  =&gt; B =&gt; C =&gt; Aï¼‰ã€‚</li>
</ul>
<p>åœ¨åº”æ¥ä¸æš‡çš„éœ€æ±‚é¢å‰ï¼Œè¿˜è¦æ‹†æ¨¡å—ã€é‡æ„ã€åŠ å•æµ‹ï¼Œæ— ç–‘æ˜¯å¢åŠ å·¥ä½œé‡ï¼Œæ˜¾å¾—ä¸åˆ‡å®é™…ï¼Œã€Šé‡æ„ã€‹è¿™æœ¬ä¹¦ç»™äº†æˆ‘å¾ˆå¤šæŒ‡å¯¼ã€‚</p>
<p><strong>é‡æ„æ–¹æ³•ï¼š</strong></p>
<ul>
<li>é¢„å¤‡æ€§é‡æ„</li>
<li>å¸®åŠ©ç†è§£çš„é‡æ„</li>
<li>æ¡åƒåœ¾å¼é‡æ„ï¼ˆè¥åœ°æ³•åˆ™ï¼šé‡åˆ°ä¸€ä¸ªé‡æ„ä¸€ä¸ªï¼Œåƒè§åƒåœ¾ä¸€æ ·ï¼Œè®©ä½ ç¦»å¼€æ—¶çš„ä»£ç æ¯”æ¥æ—¶æ›´å¹²å‡€ã€å¥åº·ï¼‰</li>
<li>æœ‰è®¡åˆ’çš„é‡æ„ä¸è§æœºè¡Œäº‹çš„é‡æ„</li>
<li>é•¿æœŸé‡æ„</li>
</ul>
<p><strong>ä¸šåŠ¡ç³»ç»Ÿ1çš„æ¨¡å—ä¸UIæ¢³ç†ï¼š</strong></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7d341a479c8349418e1be072284936e2~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p><strong>ä¸šåŠ¡ç³»ç»Ÿ2çš„æ¨¡å—ä¸UIæ¢³ç†ï¼š</strong></p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/af1688492c8449aabf15f1797b0569f6~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<h2 id="6-å¯ç»´æŠ¤çš„å•å…ƒæ¨¡å—"><a href="#6-å¯ç»´æŠ¤çš„å•å…ƒæ¨¡å—" class="headerlink" title="6. å¯ç»´æŠ¤çš„å•å…ƒæ¨¡å—"></a>6. å¯ç»´æŠ¤çš„å•å…ƒæ¨¡å—</h2><blockquote>
<p>é¿å…é‡æ„åå†æ¬¡å†™å‡ºåå‘³é“çš„ä»£ç ï¼Œæå–æ‰§è¡Œæˆæœ¬æ›´ä½çš„è§„èŒƒã€‚</p>
</blockquote>
<p><strong>ä»£ç åå‘³é“ï¼š</strong></p>
<ul>
<li><strong>ç¥ç§˜å‘½å-æ— æ³•å–å‡ºå¥½åå­—ï¼ŒèƒŒåå¯èƒ½æ½œè—ç€æ›´æ·±çš„è®¾è®¡é—®é¢˜ã€‚</strong></li>
<li>é‡å¤ä»£ç </li>
<li><strong>è¿‡é•¿å‡½æ•°-å°å‡½æ•°ã€çº¯å‡½æ•°</strong>ã€‚</li>
<li>è¿‡é•¿å‚æ•°</li>
<li><strong>å…¨å±€æ•°æ®-æ•°é‡è¶Šå¤šå¤„ç†éš¾åº¦ä¼šæŒ‡æ•°ä¸Šå‡ã€‚</strong></li>
<li>å¯å˜æ•°æ®-ä¸çŸ¥é“åœ¨å“ªä¸ªèŠ‚ç‚¹ä¿®æ”¹äº†æ•°æ®ã€‚</li>
<li>å‘æ•£å¼å˜åŒ–-åªå…³æ³¨å½“å‰ä¿®æ”¹ï¼Œä¸ç”¨å…³æ³¨å…¶ä»–å…³è”ã€‚</li>
<li><strong>éœ°å¼¹å¼ä¿®æ”¹-ä¿®æ”¹ä»£ç æ•£å¸ƒå››å¤„</strong>ã€‚</li>
<li>ä¾æ‹æƒ…ç»“-ä¸å¤–éƒ¨æ¨¡å—äº¤æµæ•°æ®èƒœè¿‡å†…éƒ¨æ•°æ®ã€‚</li>
<li><strong>æ•°æ®æ³¥å›¢-ç›¸åŒçš„å‚æ•°åœ¨å¤šä¸ªå‡½æ•°é—´ä¼ é€’ã€‚</strong></li>
<li>åŸºæœ¬ç±»å‹åæ‰§</li>
<li>é‡å¤çš„switch</li>
<li>å¾ªç¯è¯­å¥</li>
<li>å†—èµ˜çš„å…ƒç´ </li>
<li>å¤¸å¤¸å…¶è°ˆé€šç”¨æ€§</li>
<li>ä¸´æ—¶å­—æ®µ</li>
<li>è¿‡é•¿çš„æ¶ˆæ¯é“¾</li>
<li>ä¸­é—´äºº</li>
<li>å†…å¹•äº¤æ˜“</li>
<li><strong>è¿‡å¤§çš„ç±»</strong></li>
<li>å¼‚æ›²åŒå·¥çš„ç±»</li>
<li>çº¯æ•°æ®ç±»</li>
<li>è¢«æ‹’ç»çš„é—èµ -ç»§æ‰¿çˆ¶ç±»æ— ç”¨çš„å±æ€§æˆ–æ–¹æ³•</li>
<li><strong>æ³¨é‡Š-å½“ä½ æ„Ÿè§‰éœ€è¦æ’°å†™æ³¨é‡Šæ—¶ï¼Œè¯·å…ˆå°è¯•é‡æ„ï¼Œè¯•ç€è®©æ‰€æœ‰æ³¨é‡Šéƒ½å˜å¾—å¤šä½™ã€‚</strong></li>
</ul>
<p><strong>è§„èŒƒï¼š</strong></p>
<ul>
<li>å…¨å±€å˜é‡æ•°é‡ï¼š20 Â±</li>
<li>æ–¹æ³•æ–¹æ³•è¡Œæ•°ï¼š15 Â±</li>
<li>ä»£ç è¡Œæ•°ï¼š300-500</li>
<li>å†…éƒ¨æ–¹æ³•ã€å†…è”æ–¹æ³•ï¼šä¸‹åˆ’çº¿å¼€å¤´</li>
</ul>
<p><strong>æŠ€å·§ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨classè¯­æ³•ï¼šå°†ç´§å¯†å…³è”çš„æ–¹æ³•å’Œå˜é‡å°è£…åœ¨ä¸€èµ·ã€‚</li>
<li>ä½¿ç”¨Eventemitter å·¥å…·åº“ï¼šå®ç°ç®€å•å‘å¸ƒè®¢é˜…ã€‚</li>
<li>ä½¿ç”¨vue  provideè¯­æ³•ï¼šä¼ é€’å®ä¾‹ã€‚</li>
<li>ä½¿ç”¨koroFileHeaderæ’ä»¶ï¼š ç»Ÿä¸€æ³¨é‡Šè§„èŒƒã€‚</li>
<li>ä½¿ç”¨Git-commit-pluginæ’ä»¶ï¼š ç»Ÿä¸€commitè§„èŒƒã€‚</li>
<li>ä½¿ç”¨eslint + stylelintï¼ˆæœªä½¿ç”¨å˜é‡ã€è¯¯æ”¹å˜é‡åã€debuggerï¼Œè‡ªåŠ¨ä¼˜åŒ–çš„cssï¼‰ã€‚</li>
</ul>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/*
 * @name: è½»é‡çº§messageæç¤ºæ’ä»¶
 * @Description: æ¨¡ä»¿iviewçš„$messageæ–¹æ³•ï¼Œapiä¸æ ·å¼ä¿æŒä¸€è‡´ã€‚
 */</span>

<span class="token keyword">class</span> <span class="token class-name">Message</span> <span class="token punctuation">&#123;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_prefixCls <span class="token operator">=</span> <span class="token string">'i-message-'</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_default <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
            top<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
            duration<span class="token operator">:</span> <span class="token number">2</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">info</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_message</span><span class="token punctuation">(</span><span class="token string">'info'</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_message</span><span class="token punctuation">(</span><span class="token string">'success'</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">warning</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_message</span><span class="token punctuation">(</span><span class="token string">'warning'</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">error</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_message</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">loading</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_message</span><span class="token punctuation">(</span><span class="token string">'loading'</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">config</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> top <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_default<span class="token punctuation">.</span>top<span class="token punctuation">,</span> duration <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_default<span class="token punctuation">.</span>duration <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_default <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
            top<span class="token punctuation">,</span>
            duration
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_setContentBoxTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> boxId <span class="token operator">=</span> <span class="token string">'messageBox'</span>
        <span class="token keyword">const</span> contentBox <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#'</span> <span class="token operator">+</span> boxId<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>contentBox<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>contentBox<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_resetDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">/**
     * @description: æ¸²æŸ“æ¶ˆæ¯
     * @param &#123;String&#125; type ç±»å‹
     * @param &#123;Object | String&#125; options è¯¦ç»†æ ¼å¼
     */</span>
    <span class="token function">_message</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> options <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            options <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
                content<span class="token operator">:</span> options
            <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_render</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>content<span class="token punctuation">,</span> options<span class="token punctuation">.</span>duration<span class="token punctuation">,</span> type<span class="token punctuation">,</span> options<span class="token punctuation">.</span>onClose<span class="token punctuation">,</span> options<span class="token punctuation">.</span>closable<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">/**
     * @description: æ¸²æŸ“æ¶ˆæ¯
     * @param &#123;String&#125; content æ¶ˆæ¯å†…å®¹
     * @param &#123;Number&#125; duration æŒç»­æ—¶é—´
     * @param &#123;String&#125; type æ¶ˆæ¯ç±»å‹
     */</span>
    <span class="token function">_render</span><span class="token punctuation">(</span>content <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">,</span> duration <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_default<span class="token punctuation">.</span>duration<span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">'info'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">onClose</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> closable <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// è·å–èŠ‚ç‚¹ä¿¡æ¯</span>
        <span class="token keyword">const</span> messageDOM <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getMsgHtml</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> content<span class="token punctuation">,</span> closable<span class="token punctuation">)</span>
        <span class="token comment">// æ’å…¥çˆ¶å®¹å™¨</span>
        <span class="token keyword">const</span> contentBox <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getContentBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        contentBox<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>messageDOM<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// åˆ é™¤æ–¹æ³•</span>
        <span class="token keyword">const</span> <span class="token function-variable function">remove</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_removeMsg</span><span class="token punctuation">(</span>contentBox<span class="token punctuation">,</span> messageDOM<span class="token punctuation">,</span> onClose<span class="token punctuation">)</span>
        <span class="token keyword">let</span> removeTimer
        <span class="token keyword">if</span><span class="token punctuation">(</span>duration <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            removeTimer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>remove<span class="token punctuation">,</span> duration <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">// å…³é—­æŒ‰é’®</span>
        closable <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_addClosBtn</span><span class="token punctuation">(</span>messageDOM<span class="token punctuation">,</span> remove<span class="token punctuation">,</span> removeTimer<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">/**
     * @description: åˆ é™¤æ¶ˆæ¯
     * @param &#123;Element&#125; contentBox çˆ¶èŠ‚ç‚¹
     * @param &#123;Element&#125; messageDOM æ¶ˆæ¯èŠ‚ç‚¹
     * @param &#123;Number&#125; duration æŒç»­æ—¶é—´
     */</span>
    <span class="token function">_removeMsg</span><span class="token punctuation">(</span><span class="token parameter">contentBox<span class="token punctuation">,</span> messageDOM<span class="token punctuation">,</span> onClose</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        messageDOM<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>_prefixCls<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">box animate__animated animate__fadeOutUp</span><span class="token template-punctuation string">`</span></span>
        messageDOM<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
            contentBox<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>messageDOM<span class="token punctuation">)</span>
            <span class="token function">onClose</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">/**
     * @description: è·å–å›¾æ ‡
     * @param &#123;String&#125; type
     * @return &#123;String&#125; DOM HTML å­—ç¬¦ä¸²
     */</span>
    <span class="token function">_getIcon</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token string">'info'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
            info<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;svg style="color:#2db7f5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
           &lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
         &lt;/svg></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            success<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;svg style="color:#19be6b"  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
           &lt;path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
         &lt;/svg></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            warning<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;svg style="color:#ff9900" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
           &lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
         &lt;/svg></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            error<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;svg style="color:#ed4014" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
           &lt;path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
         &lt;/svg></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            loading<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;svg style="color:#2db7f5" xmlns="http://www.w3.org/2000/svg" class="loading" viewBox="0 0 20 20" fill="currentColor">
           &lt;path fill-rule="evenodd" d="M9.504 1.132a1 1 0 01.992 0l1.75 1a1 1 0 11-.992 1.736L10 3.152l-1.254.716a1 1 0 11-.992-1.736l1.75-1zM5.618 4.504a1 1 0 01-.372 1.364L5.016 6l.23.132a1 1 0 11-.992 1.736L4 7.723V8a1 1 0 01-2 0V6a.996.996 0 01.52-.878l1.734-.99a1 1 0 011.364.372zm8.764 0a1 1 0 011.364-.372l1.733.99A1.002 1.002 0 0118 6v2a1 1 0 11-2 0v-.277l-.254.145a1 1 0 11-.992-1.736l.23-.132-.23-.132a1 1 0 01-.372-1.364zm-7 4a1 1 0 011.364-.372L10 8.848l1.254-.716a1 1 0 11.992 1.736L11 10.58V12a1 1 0 11-2 0v-1.42l-1.246-.712a1 1 0 01-.372-1.364zM3 11a1 1 0 011 1v1.42l1.246.712a1 1 0 11-.992 1.736l-1.75-1A1 1 0 012 14v-2a1 1 0 011-1zm14 0a1 1 0 011 1v2a1 1 0 01-.504.868l-1.75 1a1 1 0 11-.992-1.736L16 13.42V12a1 1 0 011-1zm-9.618 5.504a1 1 0 011.364-.372l.254.145V16a1 1 0 112 0v.277l.254-.145a1 1 0 11.992 1.736l-1.735.992a.995.995 0 01-1.022 0l-1.735-.992a1 1 0 01-.372-1.364z" clip-rule="evenodd" />
         &lt;/svg></span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">[</span>type<span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">/**
     * @description: è·å–æ¶ˆæ¯èŠ‚ç‚¹
     * @param &#123;String&#125; type ç±»å‹
     * @param &#123;String&#125; content æ¶ˆæ¯å†…å®¹
     * @return &#123;Element&#125; èŠ‚ç‚¹DOMå¯¹è±¡
     */</span>
    <span class="token function">_getMsgHtml</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> content</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> messageDOM <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span>
        messageDOM<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>_prefixCls<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">box animate__animated animate__fadeInDown</span><span class="token template-punctuation string">`</span></span>
        messageDOM<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">36</span> <span class="token operator">+</span> <span class="token string">'px'</span>
        messageDOM<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
                &lt;div class="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>_prefixCls<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">message" >
                    </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getIcon</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">
                    &lt;div class="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>_prefixCls<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">content-text"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>content<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/div>
                &lt;/div>
        </span><span class="token template-punctuation string">`</span></span>
        <span class="token keyword">return</span> messageDOM
    <span class="token punctuation">&#125;</span>

    <span class="token comment">/**
     * @description: æ·»åŠ å…³é—­æŒ‰é’®
     * @param &#123;Element&#125; messageDOM æ¶ˆæ¯èŠ‚ç‚¹DOM
     */</span>
    <span class="token function">_addClosBtn</span><span class="token punctuation">(</span><span class="token parameter">messageDOM<span class="token punctuation">,</span> remove<span class="token punctuation">,</span> removeTimer</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> svgStr <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;svg class="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>_prefixCls<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">btn" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            &lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        &lt;/svg></span><span class="token template-punctuation string">`</span></span>
        <span class="token keyword">const</span> closBtn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DOMParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parseFromString</span><span class="token punctuation">(</span>svgStr<span class="token punctuation">,</span> <span class="token string">'text/html'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>body<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        closBtn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
            removeTimer <span class="token operator">&amp;&amp;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>removeTimer<span class="token punctuation">)</span>
            <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
        messageDOM<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>_prefixCls<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">message</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>closBtn<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">/**
     * @description: è·å–çˆ¶èŠ‚ç‚¹å®¹å™¨
     * @return &#123;Element&#125; èŠ‚ç‚¹DOMå¯¹è±¡
     */</span>
    <span class="token function">_getContentBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> boxId <span class="token operator">=</span> <span class="token string">'messageBox'</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#'</span> <span class="token operator">+</span> boxId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#'</span> <span class="token operator">+</span> boxId<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">const</span> contentBox <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span>
            contentBox<span class="token punctuation">.</span>id <span class="token operator">=</span> boxId
            contentBox<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_default<span class="token punctuation">.</span>top <span class="token operator">+</span> <span class="token string">'px'</span>
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>contentBox<span class="token punctuation">)</span>
            <span class="token keyword">return</span> contentBox
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">/**
     * @description: é‡æ–°è®¾ç½®çˆ¶èŠ‚ç‚¹é«˜åº¦
     */</span>
    <span class="token function">_setContentBoxTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> boxId <span class="token operator">=</span> <span class="token string">'messageBox'</span>
        <span class="token keyword">const</span> contentBox <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#'</span> <span class="token operator">+</span> boxId<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>contentBox<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            contentBox<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_default<span class="token punctuation">.</span>top <span class="token operator">+</span> <span class="token string">'px'</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token comment">/**
     * @description: æ¢å¤é»˜è®¤å€¼
     */</span>
    <span class="token function">_resetDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_default <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
            top<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
            duration<span class="token operator">:</span> <span class="token number">2</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> module <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> module<span class="token punctuation">.</span>exports <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Message</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
    window<span class="token punctuation">.</span>$message <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Message</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3f9c76b639ef46999ed7ac6553208dff~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"></p>
<h2 id="6-å›é¡¾"><a href="#6-å›é¡¾" class="headerlink" title="6. å›é¡¾"></a>6. å›é¡¾</h2><ul>
<li>å®šä¹‰</li>
<li>å®‰è£…ä¸ä½¿ç”¨ï¼ˆå®‰è£…ã€è°ƒè¯•ã€gitæ‹¦æˆªã€æµ‹è¯•æŠ¥å‘Šï¼‰</li>
<li>å¸¸ç”¨APIï¼ˆjestã€vueç»„ä»¶ï¼‰</li>
<li>è½åœ°å•å…ƒæµ‹è¯•ï¼ˆæ‹†åˆ†å…³é”®æ¨¡å—åŠ å•æµ‹ï¼‰</li>
<li>æ¼”è¿›ï¼šæ„å»ºå¯æµ‹è¯•å•å…ƒæ¨¡å—ï¼ˆè®¾è®¡åŸåˆ™ã€é‡æ„ï¼‰</li>
<li>å¯ç»´æŠ¤çš„å•å…ƒæ¨¡å—ï¼ˆä»£ç è§„èŒƒï¼‰</li>
</ul>
<p><strong>è½åœ°çº¿è·¯ï¼š</strong></p>
<p>â‘  å®‰è£…ä½¿ç”¨ =&gt; â‘¡ APIå­¦ä¹  =&gt; â‘¢ è½åœ°ï¼šæ‹†åˆ†å…³é”®æ¨¡å—åŠ å•æµ‹ =&gt;  â‘£ æ¼”è¿›ï¼šæ¶æ„è®¾è®¡ä¸é‡æ„ =&gt;  â‘¤ ä»£ç è§„èŒƒ </p>
<p><strong>æœªæ¥ï¼š</strong></p>
<p>â‘¥ æ–‡æ¡£å…ˆè¡Œ(å¾…æ¢ç´¢) </p>
<p>åœ¨è¾ƒä¸ºå¤æ‚çš„ä¸šåŠ¡ç³»ç»Ÿå¼€å‘è¿‡ç¨‹ä¸­ï¼Œä»ç¬¬ä¸€ç‰ˆä»£ç åˆ°é€æ­¥åˆ’åˆ†æ¨¡å—ã€å¢åŠ å•æµ‹ï¼Œè¿˜æ˜¯èµ°äº†ä¸€æ®µå¼¯è·¯ã€‚<br>å¦‚æœèƒ½å¤Ÿå…»æˆæ–‡æ¡£å…ˆè¡Œçš„ä¹ æƒ¯ï¼Œå…ˆè®¾è®¡æ¨¡å—ã€æµ‹è¯•ç”¨ä¾‹ï¼Œå†ç¼–å†™ä»£ç ï¼Œä¼šæ›´é«˜æ•ˆã€‚</p>
<p><strong>ç†è§£ï¼š</strong></p>
<ul>
<li>å•å…ƒæµ‹è¯•æœ‰é•¿æœŸä»·å€¼ï¼Œä¹Ÿæœ‰æ‰§è¡Œæˆæœ¬ã€‚</li>
<li>å¥½çš„æ¶æ„è®¾è®¡æ˜¯å•æµ‹çš„åœŸå£¤ï¼Œ<strong>ä¸ºå•ä¸€èŒè´£çš„æ¨¡å—è®¾è®¡å•æµ‹ã€å¢åŠ å•å…ƒæµ‹è¯•æ›´åŠ é¡ºç•…</strong>ã€‚</li>
<li>æ¯ä¸ªé¡¹ç›®çš„ä¸šåŠ¡å½¢æ€ä¸é˜¶æ®µä¸ä¸€æ ·ï¼Œä¸ä¸€å®šéƒ½é€‚åˆï¼Œ<strong>æ‰¾åˆ°é€‚åˆé¡¹ç›®çš„å¹³è¡¡ç‚¹</strong>ã€‚</li>
</ul>
<h2 id="7-è®¨è®º-amp-amp-Thank"><a href="#7-è®¨è®º-amp-amp-Thank" class="headerlink" title="7. è®¨è®º &amp;&amp; Thank"></a>7. è®¨è®º &amp;&amp; Thank</h2><p>æ„Ÿè°¢å„ä½èƒ½å¤Ÿçœ‹åˆ°æœ€åï¼Œå‰åŠéƒ¨åå¹²ï¼ŒååŠéƒ¨åˆ†åæ°´ï¼Œä¸ºå†…éƒ¨åˆ†äº«ç¬”è®°ï¼Œéƒ¨åˆ†ä»£ç å’Œå›¾ç‰‡ç»è¿‡å¤„ç†ï¼Œé‡åœ¨åˆ†äº«å’Œå¤§å®¶ä¸€èµ·äº¤æµï¼Œæ³è¯·æ–§æ­£ï¼Œæœ‰æ”¶è·è¿˜è¯·ç‚¹èµæ”¶è—ã€‚</p>

  <p> â€” 2021å¹´7æœˆ8æ—¥</p>
  


          <div class="row mt-2">
  
    <div class="eight columns">
      <p id="madewith" style="color: #c7c7c7;">é™æ°´æµæ·±ï¼Œé—»å–§äº«é™ã€‚ç©ºå±±é¸£å“ï¼Œè§æƒ¯å¸ç©ºã€‚
        
    </div>

    <!-- Sepcial thanks to https://simpleicons.org/ for the icons -->
    <div class="four columns mb-3 posisi" >
      
      <a class="ml-0 footer-link icon" href="https://github.com/nihaojob" target="_blank" style="text-decoration: none" rel="noreferrer" aria-label="GitHub">
        <svg class="github svg-hov" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
      </a>
      

      

      

      

      

    </div>
  
</div>

        </div>
      </div>

    </div>

  </div>
  <script src="/js/nanobar.min.js"></script>
  <script>
    var options = {
      classname: 'nanobar',
      id: 'myNanobar'
    };
    var nanobar = new Nanobar(options);
    nanobar.go(30);
    nanobar.go(76);
    nanobar.go(100);
  </script>

</body>

</html>
